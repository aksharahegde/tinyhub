var Uu=Object.defineProperty;var zu=(s,t,e)=>t in s?Uu(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var ha=(s,t,e)=>zu(s,typeof t!="symbol"?t+"":t,e);import{R as qr}from"./react-jfyNKTSf.js";const $o=s=>typeof s,Hu="tinybase",rt="",Wu=$o(rt),Ou=$o($o),Bu="Listener",Qs="Result",ju="get",Qu="set",xu="add",Gu="del",$e="Has",Ju="has",tt="Ids",xs="Table",on=xs+"s",di=xs+tt,et="Row",dc=et+"Count",vt=et+tt,Cc="Sorted"+et+tt,Lt="Cell",de=Lt+tt,Ce="Value",Qe=Ce+"s",Ci=Ce+tt,Kr="Transaction",Ti="Partial",Li="Finish",Tc="Status",Xr="Metric",Yu="Index",Lc="Slice",qu="Relationship",gi="Remote"+et+"Id",yi="Local",Ri="Linked",Ku="Query",gc="Checkpoint",Xu=globalThis,Ct=s=>s==null,Tt=(s,t,e)=>Ct(s)?e==null?void 0:e():t(s),hi=s=>$o(s)==Wu,Zr=s=>$o(s)==Ou,Zu=s=>Array.isArray(s),Co=s=>s.length,Ie=()=>{},Iu=(s,t)=>nt(new Array(s).fill(0),(e,o)=>t(o)),Ei=(s,t)=>s.every(t),hr=(s,t)=>Co(s)===Co(t)&&Ei(s,(e,o)=>t[o]===e),nt=(s,t)=>s.map(t),s1=s=>Co(s)==0,t1=(s,t)=>s.filter(t),Ea=(s,t,e)=>s.with(t,e),{PureComponent:CC,Fragment:TC,createContext:e1,createElement:at,useCallback:Pt,useContext:yc,useEffect:sn,useLayoutEffect:n1,useMemo:Ir,useRef:o1,useState:tn,useSyncExternalStore:c1}=qr,gt=(s,...t)=>Ct(s)?{}:s(...t),wi=(s,t)=>[s,s==null?void 0:s.getStore(),s==null?void 0:s.getLocalTableId(t),s==null?void 0:s.getRemoteTableId(t)],r1=(s,t)=>[s,s==null?void 0:s.getStore(),s==null?void 0:s.getTableId(t)],Rc=Object,wa=s=>Rc.getPrototypeOf(s),a1=Rc.entries,ba=s=>!Ct(s)&&Tt(wa(s),t=>t==Rc.prototype||Ct(wa(t)),()=>!0),bi=Rc.keys,Vi=(s,t)=>Tt(s,e=>e[t]),Ai=(s,t)=>t in s,i1=(s,t)=>(delete s[t],s),l1=s=>Co(bi(s)),Pi=(s,t)=>{const e=a1(s);return Co(e)===l1(t)&&Ei(e,([o,c])=>ba(c)?ba(t[o])?Pi(t[o],c):!1:t[o]===c)},u1=(s,t,e)=>(Ai(s,t)||(s[t]=e()),s[t]),To=u1(Xu,Hu+"_uirc",()=>e1([])),Zt=(s,t)=>{const e=yc(To);return Ct(s)?e[t*2]:hi(s)?Vi(e[t*2+1]??{},s):s},Te=(s,t)=>{const e=Zt(s,t);return Ct(s)||hi(s)?e:s},Le=(s,t,e)=>{const{16:o,17:c}=yc(To);sn(()=>(o==null||o(e,s,t),()=>c==null?void 0:c(e,s)),[o,s,t,e,c])},ge=s=>bi(yc(To)[s*2+1]??{}),f1=()=>ge(0),S1=s=>Zt(s,0),z=s=>Te(s,0),$1=(s,t)=>Le(s,t,0),d1=()=>ge(1),C1=s=>Zt(s,1),hc=s=>Te(s,1),T1=(s,t)=>Le(s,t,1),L1=()=>ge(2),g1=s=>Zt(s,2),xe=s=>Te(s,2),y1=(s,t)=>Le(s,t,2),R1=()=>ge(3),h1=s=>Zt(s,3),Nt=s=>Te(s,3),E1=(s,t)=>Le(s,t,3),w1=()=>ge(4),b1=s=>Zt(s,4),Ws=s=>Te(s,4),V1=(s,t)=>Le(s,t,4),A1=()=>ge(5),P1=s=>Zt(s,5),yt=s=>Te(s,5),D1=(s,t)=>Le(s,t,5),k1=()=>ge(6),v1=s=>Zt(s,6),sa=s=>Te(s,6),N1=(s,t)=>Le(s,t,6),m1=()=>ge(7),_1=s=>Zt(s,7),ta=s=>Te(s,7),M1=(s,t)=>Le(s,t,7),Cs=[],Va=[{},[],[Cs,void 0,Cs],void 0,!1,0],F1=[Pi,hr,([s,t,e],[o,c,i])=>t===c&&hr(s,o)&&hr(e,i)],p1=(s,t)=>s===t,Ao=(s,t,e=Cs)=>{const[,o]=tn(),[c,i]=tn();return sn(()=>{const u=s?t(s):void 0;return i(u),o([]),u==null?void 0:u.destroy},[s,...e]),c},Di=(s,t,...e)=>{var c;const o=(c=s==null?void 0:s[xu+t+Bu])==null?void 0:c.call(s,...e);return()=>s==null?void 0:s.delListener(o)},x=(s,t,e,o=Cs)=>{const c=o1(Va[e]),i=Pt(()=>{var $;const d=(($=t==null?void 0:t[(e==4?Ju:ju)+s])==null?void 0:$.call(t,...o))??Va[e];return(F1[e]??p1)(d,c.current)?c.current:c.current=d},[t,e,s,...o]),u=Pt(d=>Di(t,(e==4?$e:rt)+s,...o,d),[t,e,s,...o]);return c1(u,i,i)},G=(s,t,e,o=Cs,c=Cs,...i)=>n1(()=>Di(t,s,...c,e,...i),[t,s,...c,...o,...i]),ye=(s,t,e,o=Cs,c=Ie,i=Cs,...u)=>{const d=z(s);return Pt($=>Tt(d,S=>Tt(e($,S),T=>c(S[Qu+t](...ki(u,S,$),T),T))),[d,t,...o,...i,...vi(u)])},ki=(s,t,e)=>nt(s,o=>Zr(o)?o(e,t):o),vi=s=>t1(s,t=>!Zr(t)),cn=(s,t,e=Ie,o=Cs,...c)=>{const i=z(s);return Pt(u=>e(i==null?void 0:i[Gu+t](...ki(c,i,u))),[i,t,...o,...vi(c)])},Ni=(s,t,e)=>{const o=yt(s);return Pt(()=>o==null?void 0:o[t](e),[o,t,e])},U1=(s,t=Cs)=>Ir(s,t),z1=(s,t=Cs)=>Ir(s,t),H1=s=>x(on,z(s),4,[]),W1=s=>x(on,z(s),0),mi=s=>x(di,z(s),1),O1=(s,t)=>x(xs,z(t),4,[s]),B1=(s,t)=>x(xs,z(t),0,[s]),j1=(s,t)=>x(xs+de,z(t),1,[s]),Q1=(s,t,e)=>x(xs+Lt,z(e),4,[s,t]),x1=(s,t)=>x(dc,z(t),5,[s]),_i=(s,t)=>x(vt,z(t),1,[s]),Mi=(s,t,e,o=0,c,i)=>x(Cc,z(i),1,[s,t,e,o,c]),G1=(s,t,e)=>x(et,z(e),4,[s,t]),J1=(s,t,e)=>x(et,z(e),0,[s,t]),Fi=(s,t,e)=>x(de,z(e),1,[s,t]),Y1=(s,t,e,o)=>x(Lt,z(o),4,[s,t,e]),pi=(s,t,e,o)=>x(Lt,z(o),3,[s,t,e]),q1=s=>x(Qe,z(s),4,[]),K1=s=>x(Qe,z(s),0),Ui=s=>x(Ci,z(s),1),X1=(s,t)=>x(Ce,z(t),4,[s]),zi=(s,t)=>x(Ce,z(t),3,[s]),Z1=(s,t,e,o,c)=>ye(e,on,s,t,o,c),I1=(s,t,e,o,c,i)=>ye(o,xs,t,e,c,i,s),s0=(s,t,e,o,c,i,u)=>ye(c,et,e,o,i,u,s,t),t0=(s,t,e=Cs,o,c=Ie,i=Cs,u=!0)=>{const d=z(o);return Pt($=>Tt(d,S=>Tt(t($,S),T=>c(S.addRow(Zr(s)?s($,S):s,T,u),S,T))),[d,s,...e,...i,u])},e0=(s,t,e,o,c,i,u)=>ye(c,Ti+et,e,o,i,u,s,t),n0=(s,t,e,o,c,i,u,d)=>ye(i,Lt,o,c,u,d,s,t,e),o0=(s,t,e,o,c)=>ye(e,Qe,s,t,o,c),c0=(s,t,e,o,c)=>ye(e,Ti+Qe,s,t,o,c),r0=(s,t,e,o,c,i)=>ye(o,Ce,t,e,c,i,s),a0=(s,t,e)=>cn(s,on,t,e),i0=(s,t,e,o)=>cn(t,xs,e,o,s),l0=(s,t,e,o,c)=>cn(e,et,o,c,s,t),u0=(s,t,e,o,c,i,u)=>cn(c,Lt,i,u,s,t,e,o),f0=(s,t,e)=>cn(s,Qe,t,e),S0=(s,t,e,o)=>cn(t,Ce,e,o,s),$0=(s,t,e,o)=>G($e+on,z(o),s,t,[],e),d0=(s,t,e,o)=>G(on,z(o),s,t,Cs,e),C0=(s,t,e,o)=>G(di,z(o),s,t,Cs,e),T0=(s,t,e,o,c)=>G($e+xs,z(c),t,e,[s],o),L0=(s,t,e,o,c)=>G(xs,z(c),t,e,[s],o),g0=(s,t,e,o,c)=>G(xs+de,z(c),t,e,[s],o),y0=(s,t,e,o,c,i)=>G($e+xs+Lt,z(i),e,o,[s,t],c),R0=(s,t,e,o,c)=>G(dc,z(c),t,e,[s],o),h0=(s,t,e,o,c)=>G(vt,z(c),t,e,[s],o),E0=(s,t,e,o,c,i,u,d,$)=>G(Cc,z($),i,u,[s,t,e,o,c],d),w0=(s,t,e,o,c,i)=>G($e+et,z(i),e,o,[s,t],c),b0=(s,t,e,o,c,i)=>G(et,z(i),e,o,[s,t],c),V0=(s,t,e,o,c,i)=>G(de,z(i),e,o,[s,t],c),A0=(s,t,e,o,c,i,u)=>G($e+Lt,z(u),o,c,[s,t,e],i),P0=(s,t,e,o,c,i,u)=>G(Lt,z(u),o,c,[s,t,e],i),D0=(s,t,e,o)=>G($e+Qe,z(o),s,t,[],e),k0=(s,t,e,o)=>G(Qe,z(o),s,t,Cs,e),v0=(s,t,e,o)=>G(Ci,z(o),s,t,Cs,e),N0=(s,t,e,o,c)=>G($e+Ce,z(c),t,e,[s],o),m0=(s,t,e,o,c)=>G(Ce,z(c),t,e,[s],o),_0=(s,t,e)=>G("Start"+Kr,z(e),s,t),M0=(s,t,e)=>G("Will"+Li+Kr,z(e),s,t),F0=(s,t,e)=>G("Did"+Li+Kr,z(e),s,t),p0=(s,t,e)=>Ao(s,t,e),U0=s=>x(Xr+tt,hc(s),1),Hi=(s,t)=>x(Xr,hc(t),3,[s]),z0=(s,t,e,o)=>G(Xr,hc(o),t,e,[s]),H0=(s,t,e)=>Ao(s,t,e),Wi=(s,t)=>x(Lc+tt,xe(t),1,[s]),W0=s=>x(Yu+tt,xe(s),1),Oi=(s,t,e)=>x(Lc+vt,xe(e),1,[s,t]),O0=(s,t,e,o)=>G(Lc+tt,xe(o),t,e,[s]),B0=(s,t,e,o,c)=>G(Lc+vt,xe(c),e,o,[s,t]),j0=(s,t,e)=>Ao(s,t,e),Q0=s=>x(qu+tt,Nt(s),1),Bi=(s,t,e)=>x(gi,Nt(e),3,[s,t]),ji=(s,t,e)=>x(yi+vt,Nt(e),1,[s,t]),Qi=(s,t,e)=>x(Ri+vt,Nt(e),1,[s,t]),x0=(s,t,e,o,c)=>G(gi,Nt(c),e,o,[s,t]),G0=(s,t,e,o,c)=>G(yi+vt,Nt(c),e,o,[s,t]),J0=(s,t,e,o,c)=>G(Ri+vt,Nt(c),e,o,[s,t]),Y0=(s,t,e)=>Ao(s,t,e),q0=s=>x(Ku+tt,Ws(s),1),K0=(s,t)=>x(Qs+xs,Ws(t),0,[s]),X0=(s,t)=>x(Qs+xs+de,Ws(t),1,[s]),Z0=(s,t)=>x(Qs+dc,Ws(t),5,[s]),xi=(s,t)=>x(Qs+vt,Ws(t),1,[s]),Gi=(s,t,e,o=0,c,i)=>x(Qs+Cc,Ws(i),1,[s,t,e,o,c]),I0=(s,t,e)=>x(Qs+et,Ws(e),0,[s,t]),Ji=(s,t,e)=>x(Qs+de,Ws(e),1,[s,t]),Yi=(s,t,e,o)=>x(Qs+Lt,Ws(o),3,[s,t,e]),sf=(s,t,e,o)=>G(Qs+xs,Ws(o),t,e,[s]),tf=(s,t,e,o)=>G(Qs+xs+de,Ws(o),t,e,[s]),ef=(s,t,e,o)=>G(Qs+dc,Ws(o),t,e,[s]),nf=(s,t,e,o)=>G(Qs+vt,Ws(o),t,e,[s]),of=(s,t,e,o,c,i,u,d)=>G(Qs+Cc,Ws(d),i,u,[s,t,e,o,c]),cf=(s,t,e,o,c)=>G(Qs+et,Ws(c),e,o,[s,t]),rf=(s,t,e,o,c)=>G(Qs+de,Ws(c),e,o,[s,t]),af=(s,t,e,o,c,i)=>G(Qs+Lt,Ws(i),o,c,[s,t,e]),lf=(s,t,e)=>Ao(s,t,e),Ec=s=>x(gc+tt,yt(s),2),qi=(s,t)=>x(gc,yt(t),3,[s]),uf=(s=Ie,t=Cs,e,o=Ie,c=Cs)=>{const i=yt(e);return Pt(u=>Tt(i,d=>{const $=s(u);o(d.addCheckpoint($),d,$)}),[i,...t,...c])},Ki=s=>Ni(s,"goBackward"),Xi=s=>Ni(s,"goForward"),ff=(s,t=Cs,e,o=Ie,c=Cs)=>{const i=yt(e);return Pt(u=>Tt(i,d=>Tt(s(u),$=>o(d.goTo($),$))),[i,...t,...c])},Sf=s=>{const t=yt(s),[e,o]=Ec(t);return[!s1(e),Ki(t),o,Tt(o,c=>t==null?void 0:t.getCheckpoint(c))??rt]},$f=s=>{const t=yt(s),[,,[e]]=Ec(t);return[!Ct(e),Xi(t),e,Tt(e,o=>t==null?void 0:t.getCheckpoint(o))??rt]},df=(s,t,e)=>G(gc+tt,yt(e),s,t),Cf=(s,t,e,o)=>G(gc,yt(o),t,e,[s]),Tf=(s,t,e=Cs,o,c=Cs,i,u=Cs)=>{const[,d]=tn(),[$,S]=tn();return sn(()=>{(async()=>{const T=s?await t(s):void 0;S(T),T&&o&&(async()=>(await o(T),d([])))()})()},[s,...e,...c]),sn(()=>()=>{$&&($.destroy(),i==null||i($))},[$,...u]),$},Lf=s=>x(Tc,sa(s),5,[]),gf=(s,t,e)=>G(Tc,sa(e),s,t,[]),yf=(s,t,e=Cs,o,c=Cs)=>{const[i,u]=tn();return sn(()=>{(async()=>{const d=s?await t(s):void 0;u(d)})()},[s,...e]),sn(()=>()=>{i&&(i.destroy(),o==null||o(i))},[i,...c]),i},Rf=s=>x(Tc,ta(s),5,[]),hf=(s,t,e)=>G(Tc,ta(e),s,t,[]),se=(s,t,e,o,c)=>[e??t[s*2],{...t[s*2+1],...o,...c[s]}],Zi=({tableId:s,store:t,rowComponent:e=Po,getRowComponentProps:o,customCellIds:c,separator:i,debugIds:u},d)=>Gs(nt(d,$=>at(e,{...gt(o,$),key:$,tableId:s,rowId:$,customCellIds:c,store:t,debugIds:u})),i,u,s),Ii=({queryId:s,queries:t,resultRowComponent:e=rl,getResultRowComponentProps:o,separator:c,debugIds:i},u)=>Gs(nt(u,d=>at(e,{...gt(o,d),key:d,queryId:s,rowId:d,queries:t,debugIds:i})),c,i,s),sl=({relationshipId:s,relationships:t,rowComponent:e=Po,getRowComponentProps:o,separator:c,debugIds:i},u,d)=>{const[$,S,T]=wi(Nt(t),s),L=u(s,d,$);return Gs(nt(L,R=>at(e,{...gt(o,R),key:R,tableId:T,rowId:R,store:S,debugIds:i})),c,i,d)},ea=s=>({checkpoints:t,checkpointComponent:e=al,getCheckpointComponentProps:o,separator:c,debugIds:i})=>{const u=yt(t);return Gs(nt(s(Ec(u)),d=>at(e,{...gt(o,d),key:d,checkpoints:u,checkpointId:d,debugIds:i})),c)},Ef=({store:s,storesById:t,metrics:e,metricsById:o,indexes:c,indexesById:i,relationships:u,relationshipsById:d,queries:$,queriesById:S,checkpoints:T,checkpointsById:L,persister:R,persistersById:h,synchronizer:w,synchronizersById:A,children:_})=>{const v=yc(To),[b,os]=tn(()=>Iu(8,()=>({}))),fs=Pt((K,V,k)=>os(Ts=>Vi(Ts[K],V)==k?Ts:Ea(Ts,K,{...Ts[K],[V]:k})),[]),Ss=Pt((K,V)=>os(k=>Ai(k[K],V)?Ea(k,K,i1(k[K],V)):k),[]);return at(To.Provider,{value:Ir(()=>[...se(0,v,s,t,b),...se(1,v,e,o,b),...se(2,v,c,i,b),...se(3,v,u,d,b),...se(4,v,$,S,b),...se(5,v,T,L,b),...se(6,v,R,h,b),...se(7,v,w,A,b),fs,Ss],[b,s,t,e,o,c,i,u,d,$,S,T,L,R,h,w,A,v,fs,Ss])},_)},Gs=(s,t,e,o)=>{const c=Ct(t)||!Zu(s)?s:nt(s,(i,u)=>u>0?[t,i]:i);return e?[o,":{",c,"}"]:c},wf=(s,t,e,o)=>{const c=Fi(t,e,o);return s??c},tl=({tableId:s,rowId:t,cellId:e,store:o,debugIds:c})=>Gs(rt+(pi(s,t,e,o)??rt),void 0,c,e),Po=({tableId:s,rowId:t,store:e,cellComponent:o=tl,getCellComponentProps:c,customCellIds:i,separator:u,debugIds:d})=>Gs(nt(wf(i,s,t,e),$=>at(o,{...gt(c,$),key:$,tableId:s,rowId:t,cellId:$,store:e,debugIds:d})),u,d,t),el=s=>Zi(s,_i(s.tableId,s.store)),bf=({cellId:s,descending:t,offset:e,limit:o,...c})=>Zi(c,Mi(c.tableId,s,t,e,o,c.store)),Vf=({store:s,tableComponent:t=el,getTableComponentProps:e,separator:o,debugIds:c})=>Gs(nt(mi(s),i=>at(t,{...gt(e,i),key:i,tableId:i,store:s,debugIds:c})),o),nl=({valueId:s,store:t,debugIds:e})=>Gs(rt+(zi(s,t)??rt),void 0,e,s),Af=({store:s,valueComponent:t=nl,getValueComponentProps:e,separator:o,debugIds:c})=>Gs(nt(Ui(s),i=>at(t,{...gt(e,i),key:i,valueId:i,store:s,debugIds:c})),o),Pf=({metricId:s,metrics:t,debugIds:e})=>Gs(Hi(s,t)??rt,void 0,e,s),ol=({indexId:s,sliceId:t,indexes:e,rowComponent:o=Po,getRowComponentProps:c,separator:i,debugIds:u})=>{const[d,$,S]=r1(xe(e),s),T=Oi(s,t,d);return Gs(nt(T,L=>at(o,{...gt(c,L),key:L,tableId:S,rowId:L,store:$,debugIds:u})),i,u,t)},Df=({indexId:s,indexes:t,sliceComponent:e=ol,getSliceComponentProps:o,separator:c,debugIds:i})=>Gs(nt(Wi(s,t),u=>at(e,{...gt(o,u),key:u,indexId:s,sliceId:u,indexes:t,debugIds:i})),c,i,s),kf=({relationshipId:s,localRowId:t,relationships:e,rowComponent:o=Po,getRowComponentProps:c,debugIds:i})=>{const[u,d,,$]=wi(Nt(e),s),S=Bi(s,t,u);return Gs(Ct($)||Ct(S)?null:at(o,{...gt(c,S),key:S,tableId:$,rowId:S,store:d,debugIds:i}),void 0,i,t)},vf=s=>sl(s,ji,s.remoteRowId),Nf=s=>sl(s,Qi,s.firstRowId),cl=({queryId:s,rowId:t,cellId:e,queries:o,debugIds:c})=>Gs(rt+(Yi(s,t,e,o)??rt),void 0,c,e),rl=({queryId:s,rowId:t,queries:e,resultCellComponent:o=cl,getResultCellComponentProps:c,separator:i,debugIds:u})=>Gs(nt(Ji(s,t,e),d=>at(o,{...gt(c,d),key:d,queryId:s,rowId:t,cellId:d,queries:e,debugIds:u})),i,u,t),mf=s=>Ii(s,xi(s.queryId,s.queries)),_f=({cellId:s,descending:t,offset:e,limit:o,...c})=>Ii(c,Gi(c.queryId,s,t,e,o,c.queries)),al=({checkpoints:s,checkpointId:t,debugIds:e})=>Gs(qi(t,s)??rt,void 0,e,t),Mf=ea(s=>s[0]),Ff=ea(s=>Ct(s[1])?[]:[s[1]]),pf=ea(s=>s[2]),LC=Object.freeze(Object.defineProperty({__proto__:null,BackwardCheckpointsView:Mf,CellView:tl,CheckpointView:al,CurrentCheckpointView:Ff,ForwardCheckpointsView:pf,IndexView:Df,LinkedRowsView:Nf,LocalRowsView:vf,MetricView:Pf,Provider:Ef,RemoteRowView:kf,ResultCellView:cl,ResultRowView:rl,ResultSortedTableView:_f,ResultTableView:mf,RowView:Po,SliceView:ol,SortedTableView:bf,TableView:el,TablesView:Vf,ValueView:nl,ValuesView:Af,useAddRowCallback:t0,useCell:pi,useCellIds:Fi,useCellIdsListener:V0,useCellListener:P0,useCheckpoint:qi,useCheckpointIds:Ec,useCheckpointIdsListener:df,useCheckpointListener:Cf,useCheckpoints:P1,useCheckpointsIds:A1,useCheckpointsOrCheckpointsById:yt,useCreateCheckpoints:lf,useCreateIndexes:H0,useCreateMergeableStore:z1,useCreateMetrics:p0,useCreatePersister:Tf,useCreateQueries:Y0,useCreateRelationships:j0,useCreateStore:U1,useCreateSynchronizer:yf,useDelCellCallback:u0,useDelRowCallback:l0,useDelTableCallback:i0,useDelTablesCallback:a0,useDelValueCallback:S0,useDelValuesCallback:f0,useDidFinishTransactionListener:F0,useGoBackwardCallback:Ki,useGoForwardCallback:Xi,useGoToCallback:ff,useHasCell:Y1,useHasCellListener:A0,useHasRow:G1,useHasRowListener:w0,useHasTable:O1,useHasTableCell:Q1,useHasTableCellListener:y0,useHasTableListener:T0,useHasTables:H1,useHasTablesListener:$0,useHasValue:X1,useHasValueListener:N0,useHasValues:q1,useHasValuesListener:D0,useIndexIds:W0,useIndexes:g1,useIndexesIds:L1,useIndexesOrIndexesById:xe,useLinkedRowIds:Qi,useLinkedRowIdsListener:J0,useLocalRowIds:ji,useLocalRowIdsListener:G0,useMetric:Hi,useMetricIds:U0,useMetricListener:z0,useMetrics:C1,useMetricsIds:d1,useMetricsOrMetricsById:hc,usePersister:v1,usePersisterIds:k1,usePersisterOrPersisterById:sa,usePersisterStatus:Lf,usePersisterStatusListener:gf,useProvideCheckpoints:D1,useProvideIndexes:y1,useProvideMetrics:T1,useProvidePersister:N1,useProvideQueries:V1,useProvideRelationships:E1,useProvideStore:$1,useProvideSynchronizer:M1,useQueries:b1,useQueriesIds:w1,useQueriesOrQueriesById:Ws,useQueryIds:q0,useRedoInformation:$f,useRelationshipIds:Q0,useRelationships:h1,useRelationshipsIds:R1,useRelationshipsOrRelationshipsById:Nt,useRemoteRowId:Bi,useRemoteRowIdListener:x0,useResultCell:Yi,useResultCellIds:Ji,useResultCellIdsListener:rf,useResultCellListener:af,useResultRow:I0,useResultRowCount:Z0,useResultRowCountListener:ef,useResultRowIds:xi,useResultRowIdsListener:nf,useResultRowListener:cf,useResultSortedRowIds:Gi,useResultSortedRowIdsListener:of,useResultTable:K0,useResultTableCellIds:X0,useResultTableCellIdsListener:tf,useResultTableListener:sf,useRow:J1,useRowCount:x1,useRowCountListener:R0,useRowIds:_i,useRowIdsListener:h0,useRowListener:b0,useSetCellCallback:n0,useSetCheckpointCallback:uf,useSetPartialRowCallback:e0,useSetPartialValuesCallback:c0,useSetRowCallback:s0,useSetTableCallback:I1,useSetTablesCallback:Z1,useSetValueCallback:r0,useSetValuesCallback:o0,useSliceIds:Wi,useSliceIdsListener:O0,useSliceRowIds:Oi,useSliceRowIdsListener:B0,useSortedRowIds:Mi,useSortedRowIdsListener:E0,useStartTransactionListener:_0,useStore:S1,useStoreIds:f1,useStoreOrStoreById:z,useSynchronizer:_1,useSynchronizerIds:m1,useSynchronizerOrSynchronizerById:ta,useSynchronizerStatus:Rf,useSynchronizerStatusListener:hf,useTable:B1,useTableCellIds:j1,useTableCellIdsListener:g0,useTableIds:mi,useTableIdsListener:C0,useTableListener:L0,useTables:W1,useTablesListener:d0,useUndoInformation:Sf,useValue:zi,useValueIds:Ui,useValueIdsListener:v0,useValueListener:m0,useValues:K1,useValuesListener:k0,useWillFinishTransactionListener:M0},Symbol.toStringTag,{value:"Module"})),ie=s=>typeof s,le="",il=ie(le),Uf=ie(!0),ll=ie(0),zf=ie(ie),Mo="type",ke="default",Hf="Listener",Wf="add",ve="Has",wc="Ids",Ke="Table",Aa=Ke+"s",Of=Ke+wc,Xo="Row",Bf=Xo+"Count",jf=Xo+wc,Ko="Cell",Pa=Ko+wc,Zo="Value",Da=Zo+"s",Qf=Zo+wc,rs=s=>le+s,xf=isFinite,Gf=(s,t)=>s instanceof t,Rs=s=>s==null,Ds=(s,t,e)=>Rs(s)?e==null?void 0:e():t(s),ul=s=>s==il||s==Uf,Jf=s=>ie(s)==il,ka=s=>ie(s)==zf,Lo=s=>Array.isArray(s),va=(s,t,e)=>s.slice(t,e),Dt=s=>s.length,Yf=(s,t)=>s.test(t),qf=(s,t)=>s.includes(t),fl=(s,t)=>s.every(t),Sl=(s,t)=>Dt(s)===Dt(t)&&fl(s,(e,o)=>t[o]===e),Na=(s,t)=>fl(s,(e,o)=>o==0||t(s[o-1],e)<=0),vr=(s,t)=>s.sort(t),Ue=(s,t)=>s.forEach(t),go=(s,t)=>s.map(t),Kf=s=>Dt(s)==0,Xf=(s,t,e)=>s.reduce(t,e),Io=(s,...t)=>s.push(...t),Zf=s=>s.shift(),Ge=Object,ma=s=>Ge.getPrototypeOf(s),If=Ge.entries,sS=Ge.isFrozen,$l=s=>!Rs(s)&&Ds(ma(s),t=>t==Ge.prototype||Rs(ma(t)),()=>!0),tS=Ge.keys,dl=Ge.freeze,co=(s,t)=>t in s,Cl=(s,t)=>(delete s[t],s),Yt=(s,t)=>go(If(s),([e,o])=>t(o,e)),eS=s=>Dt(tS(s)),Et=s=>$l(s)&&eS(s)==0,te=(s,t,e,o=0)=>Rs(s)||!$l(s)||!o&&Et(s)||sS(s)?(e==null||e(),!1):(Yt(s,(c,i)=>{t(c,i)||Cl(s,i)}),o?!0:!Et(s)),na=s=>t=>Xf(ca(t),(e,o)=>e+s(o),0),oa=s=>(s==null?void 0:s.size)??0,bc=na(oa),Xe=na(bc),Er=na(Xe),_s=(s,t)=>(s==null?void 0:s.has(t))??!1,j=s=>Rs(s)||oa(s)==0,ca=s=>[...(s==null?void 0:s.values())??[]],uo=s=>s.clear(),Q=(s,t)=>s==null?void 0:s.forEach(t),ae=(s,t)=>s==null?void 0:s.delete(t),p=s=>new Map(s),Me=s=>[...(s==null?void 0:s.keys())??[]],D=(s,t)=>s==null?void 0:s.get(t),Is=(s,t)=>Q(s,(e,o)=>t(o,e)),nS=(s,t)=>go([...(s==null?void 0:s.entries())??[]],([e,o])=>t(o,e)),W=(s,t,e)=>Rs(e)?(ae(s,t),s):s==null?void 0:s.set(t,e),Hs=(s,t,e,o)=>(_s(s,t)?o==null||o(D(s,t)):W(s,t,e()),D(s,t)),Ne=(s,t,e,o=W)=>(Yt(t,(c,i)=>e(s,i,c)),Is(s,c=>co(t,c)?0:o(s,c)),s),qs=(s,t,e,o)=>{const c={};return Q(s,(i,u)=>{if(!(e!=null&&e(i,u))){const d=t?t(i,u):i;o!=null&&o(d)||(c[u]=d)}}),c},Nr=(s,t,e)=>qs(s,o=>qs(o,t,e),j,Et),Fo=(s,t,e)=>qs(s,o=>Nr(o,t,e),j,Et),ce=(s,t)=>{const e=p();return Q(s,(o,c)=>e.set(c,(t==null?void 0:t(o))??o)),e},mr=s=>ce(s,ce),wr=s=>ce(s,mr),_r=(s,t,e,o,c=0)=>Ds((e?Hs:D)(s,t[c],c>Dt(t)-2?e:p),i=>{if(c>Dt(t)-2)return o!=null&&o(i)&&W(s,t[c]),i;const u=_r(i,t,e,o,c+1);return j(i)&&W(s,t[c]),u}),so=s=>{const t=ie(s);return ul(t)||t==ll&&xf(s)?t:void 0},_a=(s,t,e,o,c)=>Rs(c)?s.delCell(t,e,o,!0):s.setCell(t,e,o,c),Ma=(s,t,e)=>Rs(e)?s.delValue(t):s.setValue(t,e),ct=s=>new Set(Lo(s)||Rs(s)?s:[s]),st=(s,t)=>s==null?void 0:s.add(t),oS=(s,t,e,o,c)=>{const i=s.hasRow,u=p(),d=p(),$=p(),S=p(),T=p(),L=p(),R=()=>s,h=()=>Me(u),w=M=>Is(d,M),A=M=>_s(d,M),_=M=>D(u,M),v=M=>D(d,M),b=(M,Z)=>W(d,M,Z),os=(M,Z,...Ls)=>{const ts=Hs(L,M,ct);return Ue(Ls,F=>st(ts,F)&&Z&&s.callListener(F)),Ls},fs=(M,...Z)=>Ds(D(L,M),Ls=>{Ue(Kf(Z)?ca(Ls):Z,ts=>{s.delListener(ts),ae(Ls,ts)}),j(Ls)&&W(L,M)}),Ss=(M,Z)=>{W(u,M,Z),_s(d,M)||(W(d,M,t()),W(S,M,p()),W(T,M,p()),c($))},K=(M,Z,Ls,ts,F)=>{Ss(M,Z);const J=p(),us=p(),cs=D(S,M),ds=D(T,M),hs=X=>{const ss=Ns=>s.getCell(Z,X,Ns),gs=D(cs,X),Ms=i(Z,X)?e(ts(ss,X)):void 0;if(gs===Ms||Lo(gs)&&Lo(Ms)&&Sl(gs,Ms)||W(J,X,[gs,Ms]),!Rs(F)){const Ns=D(ds,X),B=i(Z,X)?F(ss,X):void 0;Ns!=B&&W(us,X,B)}},ys=X=>{Ls(()=>{Q(J,([,ss],gs)=>W(cs,gs,ss)),Q(us,(ss,gs)=>W(ds,gs,ss))},J,us,cs,ds,X),uo(J),uo(us)};Is(cs,hs),s.hasTable(Z)&&Ue(s.getRowIds(Z),X=>{_s(cs,X)||hs(X)}),ys(!0),fs(M),os(M,0,s.addRowListener(Z,null,(X,ss,gs)=>hs(gs)),s.addTableListener(Z,()=>ys()))},V=M=>{W(u,M),W(d,M),W(S,M),W(T,M),fs(M),c($)};return[R,h,w,A,_,v,b,Ss,K,V,M=>o(M,$),()=>Is(L,V),os,fs]},Fa=(s,t)=>Jf(s)?e=>e(s):s??(()=>t??le),cS=(s,t)=>{const e=new WeakMap;return o=>{e.has(o)||e.set(o,s(o));const c=e.get(o);return t==null||t(c),c}},rS=/^\d+$/,Tl=()=>{const s=[];let t=0;return[e=>(e?Zf(s):null)??le+t++,e=>{Yf(rS,e)&&Dt(s)<1e3&&Io(s,e)}]},aS=(s,t=[le])=>{const e=[],o=(c,i)=>i==Dt(t)?Io(e,c):t[i]===null?Q(c,u=>o(u,i+1)):Ue([t[i],null],u=>o(D(c,u),i+1));return o(s,0),e},Ll=s=>{let t;const[e,o]=Tl(),c=p();return[(S,T,L,R=[],h=()=>[])=>{t??(t=s());const w=e(1);return W(c,w,[S,T,L,R,h]),st(_r(T,L??[le],ct),w),w},(S,T,...L)=>Ue(aS(S,T),R=>Q(R,h=>D(c,h)[0](t,...T??[],...L))),S=>Ds(D(c,S),([,T,L])=>(_r(T,L??[le],void 0,R=>(ae(R,S),j(R)?1:0)),W(c,S),o(S),L)),S=>Ds(D(c,S),([T,,L=[],R,h])=>{const w=(...A)=>{var v;const _=Dt(A);_==Dt(L)?T(t,...A,...h(A)):Rs(L[_])?Ue(((v=R[_])==null?void 0:v.call(R,...A))??[],b=>w(...A,b)):w(...A,L[_])};w()})]},gl=(s,t)=>(s??0)<(t??0)?-1:1,gC=cS(s=>{const t=p(),e=p(),[o,c,i]=Ll(()=>ts),[u,d,$,S,T,L,R,,h,w,A,_]=oS(s,p,F=>Rs(F)?le:Lo(F)?go(F,rs):rs(F),o,c),v=(F,J)=>_s(L(F),J),b=(F,J,us,cs,ds,hs=gl)=>{const ys=Rs(ds)?void 0:([X],[ss])=>ds(X,ss);return h(F,J,(X,ss,gs,Ms,Ns,B)=>{let y=0;const O=ct(),Es=ct(),Fs=L(F);if(Q(ss,([ws,zs],ps)=>{const H=ct(ws),It=ct(zs);Q(H,js=>ae(It,js)?ae(H,js):0),Q(H,js=>{st(O,js),Ds(D(Fs,js),Je=>{ae(Je,ps),j(Je)&&(W(Fs,js),y=1)})}),Q(It,js=>{st(O,js),_s(Fs,js)||(W(Fs,js,ct()),y=1),st(D(Fs,js),ps),Rs(cs)||st(Es,js)})}),X(),j(Ns)||(B?Is(Fs,ws=>st(Es,ws)):Is(gs,ws=>Ds(D(Ms,ws),zs=>st(Es,zs))),Q(Es,ws=>{const zs=(H,It)=>hs(D(Ns,H),D(Ns,It),ws),ps=[...D(Fs,ws)];Na(ps,zs)||(W(Fs,ws,ct(vr(ps,zs))),st(O,ws))})),(y||B)&&!Rs(ys)){const ws=[...Fs];Na(ws,ys)||(R(F,p(vr(ws,ys))),y=1)}y&&c(t,[F]),Q(O,ws=>c(e,[F,ws]))},Fa(us),Ds(cs,Fa)),ts},os=F=>$((J,us)=>F(J,cs=>Ss(J,cs,us))),fs=(F,J)=>Ss(F,J,L(F)),Ss=(F,J,us)=>{const cs=T(F);Q(us,(ds,hs)=>J(hs,ys=>Q(ds,X=>ys(X,ss=>s.forEachCell(cs,X,ss)))))},ts={setIndexDefinition:b,delIndexDefinition:F=>(w(F),ts),getStore:u,getIndexIds:d,forEachIndex:os,forEachSlice:fs,hasIndex:S,hasSlice:v,getTableId:T,getSliceIds:F=>Me(L(F)),getSliceRowIds:(F,J)=>ca(D(L(F),J)),addIndexIdsListener:A,addSliceIdsListener:(F,J)=>o(J,t,[F]),addSliceRowIdsListener:(F,J,us)=>o(us,e,[F,J]),delListener:F=>(i(F),ts),destroy:_,getListenerStats:()=>({sliceIds:bc(t),sliceRowIds:Xe(e)})};return dl(ts)}),po=s=>[s,s],bs=(s,t=bc)=>t(s[0])+t(s[1]),Vs=()=>[p(),p()],pa=s=>[...s],Uo=([s,t])=>s===t,iS=JSON.stringify,br=JSON.parse,Ye=s=>iS(s,(t,e)=>Gf(e,Map)?Ge.fromEntries([...e]):e),to=(s,t,e)=>W(s,t,D(s,t)==-e?void 0:e),lS=()=>{let s,t,e=!1,o=!1,c=0,i=[];const u=p(),d=p(),$=p(),S=p(),T=p(),L=p(),R=p(),h=p(),w=p(),A=p(),_=p(),v=p(),b=p(),os=p(),fs=ct(),Ss=p(),K=p(),V=p(),k=p(),Ts=Vs(),M=Vs(),Z=Vs(),Ls=Vs(),ts=Vs(),F=Vs(),J=Vs(),us=Vs(),cs=Vs(),ds=Vs(),hs=Vs(),ys=Vs(),X=Vs(),ss=Vs(),gs=Vs(),Ms=Vs(),Ns=Vs(),B=Vs(),y=Vs(),O=Vs(),Es=Vs(),Fs=Vs(),ws=p(),zs=Vs(),[ps,H,It,js]=Ll(()=>es),Je=n=>te(n,r=>te(r,ln)),jc=n=>te(n,ln),ln=n=>{if(!te(n,(a,l)=>qf([Mo,ke],l)))return!1;const r=n[Mo];return!ul(r)&&r!=ll?!1:(so(n[ke])!=r&&Cl(n,ke),!0)},Qc=Lo,xc=n=>te(n,un,Os),un=(n,r)=>(!s||_s(_,r)||Os(r))&&te(n,(a,l)=>_t(r,l,a),()=>Os(r)),_t=(n,r,a,l)=>te(l?a:dn(a,n,r),(f,C)=>Ds(fn(n,r,C,f),E=>(a[C]=E,!0),()=>!1),()=>Os(n,r)),fn=(n,r,a,l)=>s?Ds(D(D(_,n),a),f=>so(l)!=f[Mo]?Os(n,r,a,l,f[ke]):l,()=>Os(n,r,a,l)):Rs(so(l))?Os(n,r,a,l):l,Sn=(n,r)=>te(r?n:Gc(n),(a,l)=>Ds($n(l,a),f=>(n[l]=f,!0),()=>!1),()=>ut()),$n=(n,r)=>t?Ds(D(b,n),a=>so(r)!=a[Mo]?ut(n,r,a[ke]):r,()=>ut(n,r)):Rs(so(r))?ut(n,r):r,dn=(n,r,a)=>(Ds(D(v,r),([l,f])=>{Q(l,(C,E)=>{co(n,E)||(n[E]=C)}),Q(f,C=>{co(n,C)||Os(r,a,C)})}),n),Gc=n=>(t&&(Q(os,(r,a)=>{co(n,a)||(n[a]=r)}),Q(fs,r=>{co(n,r)||ut(r)})),n),Cn=n=>Ne(_,n,(r,a,l)=>{const f=p(),C=ct();Ne(Hs(_,a,p),l,(E,P,N)=>{W(E,P,N),Ds(N[ke],is=>W(f,P,is),()=>st(C,P))}),W(v,a,[f,C])},(r,a)=>{W(_,a),W(v,a)}),Tn=n=>Ne(b,n,(r,a,l)=>{W(b,a,l),Ds(l[ke],f=>W(os,a,f),()=>st(fs,a))},(r,a)=>{W(b,a),W(os,a),ae(fs,a)}),Ln=n=>Et(n)?Qt():Bt(n),Jc=([n,r])=>{(Et(n)?Qt:Bt)(n),(Et(r)?xt:jt)(r)},gn=n=>Ne(V,n,(r,a,l)=>Mt(a,l),(r,a)=>wn(a)),Mt=(n,r)=>Ne(Hs(V,n,()=>(Pn(n,1),W(Ss,n,Tl()),W(K,n,p()),p())),r,(a,l,f)=>lt(n,a,l,f),(a,l)=>bn(n,a,l)),lt=(n,r,a,l,f)=>Ne(Hs(r,a,()=>(Dn(n,a,1),p())),l,(C,E,P)=>he(n,a,C,E,P),(C,E)=>Vn(n,r,a,C,E,f)),he=(n,r,a,l,f)=>{_s(a,l)||kn(n,r,l,1);const C=D(a,l);f!==C&&(vn(n,r,l,C,f),W(a,l,f))},yn=(n,r,a,l,f)=>Ds(D(r,a),C=>he(n,a,C,l,f),()=>lt(n,r,a,dn({[l]:f},n,a))),Rn=n=>Et(n)?xt():jt(n),hn=n=>Ne(k,n,(r,a,l)=>Ft(a,l),(r,a)=>An(a)),Ft=(n,r)=>{_s(k,n)||Nn(n,1);const a=D(k,n);r!==a&&(mn(n,a,r),W(k,n,r))},En=(n,r)=>{const[a]=D(Ss,n),l=a(r);return _s(D(V,n),l)?En(n,r):l},pt=n=>D(V,n)??Mt(n,{}),wn=n=>Mt(n,{}),bn=(n,r,a)=>{const[,l]=D(Ss,n);l(a),lt(n,r,a,{},!0)},Vn=(n,r,a,l,f,C)=>{var N;const E=D((N=D(v,n))==null?void 0:N[0],f);if(!Rs(E)&&!C)return he(n,a,l,f,E);const P=is=>{vn(n,a,is,D(l,is)),kn(n,a,is,-1),W(l,is)};Rs(E)?P(f):Is(l,P),j(l)&&(Dn(n,a,-1),j(W(r,a))&&(Pn(n,-1),W(V,n),W(Ss,n),W(K,n)))},An=n=>{const r=D(os,n);if(!Rs(r))return Ft(n,r);mn(n,D(k,n)),Nn(n,-1),W(k,n)},Pn=(n,r)=>to(u,n,r),Dn=(n,r,a)=>to(Hs(S,n,p),r,a)&&W($,n,Hs($,n,()=>0)+a),kn=(n,r,a,l)=>{const f=D(K,n),C=D(f,a)??0;(C==0&&l==1||C==1&&l==-1)&&to(Hs(d,n,p),a,l),W(f,a,C!=-l?C+l:null),to(Hs(Hs(T,n,p),r,p),a,l)},vn=(n,r,a,l,f)=>{var C;Hs(Hs(Hs(L,n,p),r,p),a,()=>[l,0])[1]=f,(C=i[3])==null||C.call(i,n,r,a,f)},Nn=(n,r)=>to(R,n,r),mn=(n,r,a)=>{var l;Hs(h,n,()=>[r,0])[1]=a,(l=i[4])==null||l.call(i,n,a)},Os=(n,r,a,l,f)=>(Io(Hs(Hs(Hs(w,n,p),r,p),a,()=>[]),l),f),ut=(n,r,a)=>(Io(Hs(A,n,()=>[]),r),a),Ut=(n,r,a)=>Ds(D(D(D(L,n),r),a),([l,f])=>[!0,l,f],()=>[!1,...po(zt(n,r,a))]),_n=n=>Ds(D(h,n),([r,a])=>[!0,r,a],()=>[!1,...po(Ht(n))]),Mn=n=>!j(w)&&!j(Ms[n])?Q(n?wr(w):w,(r,a)=>Q(r,(l,f)=>Q(l,(C,E)=>H(Ms[n],[a,f,E],C)))):0,Fn=n=>!j(A)&&!j(Ns[n])?Q(n?ce(A):A,(r,a)=>H(Ns[n],[a],r)):0,ft=(n,r,a,l)=>{if(!j(n))return H(r,l,()=>qs(n)),Is(n,(f,C)=>H(a,[...l??[],f],C==1)),1},pn=n=>{const r=Wt();r!=e&&H(Ts[n],void 0,r);const a=j(ds[n]),l=j(X[n])&&j(ss[n])&&j(cs[n])&&j(hs[n])&&j(F[n])&&j(J[n])&&j(us[n])&&a&&j(Z[n])&&j(Ls[n]),f=j(gs[n])&&j(ys[n])&&j(ts[n])&&j(M[n]);if(!l||!f){const C=n?[ce(u),mr(d),ce($),mr(S),wr(T),wr(L)]:[u,d,$,S,T,L];if(!l){ft(C[0],Z[n],Ls[n]),Q(C[1],(P,N)=>ft(P,F[n],J[n],[N])),Q(C[2],(P,N)=>{P!=0&&H(us[n],[N],Hn(N))});const E=ct();Q(C[3],(P,N)=>{ft(P,cs[n],hs[n],[N])&&!a&&(H(ds[n],[N,null]),st(E,N))}),a||Q(C[5],(P,N)=>{if(!_s(E,N)){const is=ct();Q(P,Bs=>Q(Bs,([Gt,Jt],St)=>Jt!==Gt?st(is,St):ae(Bs,St))),Q(is,Bs=>H(ds[n],[N,Bs]))}}),Q(C[4],(P,N)=>Q(P,(is,Bs)=>ft(is,X[n],ss[n],[N,Bs])))}if(!f){let E;Q(C[5],(P,N)=>{let is;Q(P,(Bs,Gt)=>{let Jt;Q(Bs,([St,In],Rr)=>{In!==St&&(H(gs[n],[N,Gt,Rr],In,St,Ut),E=is=Jt=1)}),Jt&&H(ys[n],[N,Gt],Ut)}),is&&H(ts[n],[N],Ut)}),E&&H(M[n],void 0,Ut)}}},Un=n=>{const r=Ot();r!=o&&H(B[n],void 0,r);const a=j(O[n])&&j(Es[n]),l=j(Fs[n])&&j(y[n]);if(!a||!l){const f=n?[ce(R),ce(h)]:[R,h];if(a||ft(f[0],O[n],Es[n]),!l){let C;Q(f[1],([E,P],N)=>{P!==E&&(H(Fs[n],[N],P,E,_n),C=1)}),C&&H(y[n],void 0,_n)}}},U=(n,...r)=>(De(()=>n(...go(r,rs))),es),Yc=()=>[Ee(),Ve()],Ee=()=>Fo(V),$s=()=>Me(V),qc=n=>Nr(D(V,rs(n))),zn=n=>Me(D(K,rs(n))),Hn=n=>oa(D(V,rs(n))),Zs=n=>Me(D(V,rs(n))),we=(n,r,a,l=0,f)=>go(va(vr(nS(D(V,rs(n)),(C,E)=>[Rs(r)?E:D(C,rs(r)),E]),([C],[E])=>gl(C,E)*(a?-1:1)),l,Rs(f)?f:l+f),([,C])=>C),Kc=(n,r)=>qs(D(D(V,rs(n)),rs(r))),be=(n,r)=>Me(D(D(V,rs(n)),rs(r))),zt=(n,r,a)=>D(D(D(V,rs(n)),rs(r)),rs(a)),Ve=()=>qs(k),Ae=()=>Me(k),Ht=n=>D(k,rs(n)),Wt=()=>!j(V),Wn=n=>_s(V,rs(n)),On=(n,r)=>_s(D(K,rs(n)),rs(r)),Bn=(n,r)=>_s(D(V,rs(n)),rs(r)),jn=(n,r,a)=>_s(D(D(V,rs(n)),rs(r)),rs(a)),Ot=()=>!j(k),Qn=n=>_s(k,rs(n)),Xc=()=>Ye(V),Zc=()=>Ye(k),Ic=()=>Ye([V,k]),sr=()=>Ye(_),tr=()=>Ye(b),er=()=>Ye([_,b]),nr=n=>U(()=>Qc(n)?Jc(n):0),Bt=n=>U(()=>xc(n)?gn(n):0),or=(n,r)=>U(a=>un(r,a)?Mt(a,r):0,n),cr=(n,r,a)=>U((l,f)=>_t(l,f,a)?lt(l,pt(l),f,a):0,n,r),rr=(n,r,a=!0)=>De(()=>{let l;return _t(n,l,r)&&(n=rs(n),lt(n,pt(n),l=En(n,a?1:0),r)),l}),ar=(n,r,a)=>U((l,f)=>{if(_t(l,f,a,1)){const C=pt(l);Yt(a,(E,P)=>yn(l,C,f,P,E))}},n,r),ir=(n,r,a,l)=>U((f,C,E)=>Ds(fn(f,C,E,ka(l)?l(zt(f,C,E)):l),P=>yn(f,pt(f),C,E,P)),n,r,a),jt=n=>U(()=>Sn(n)?hn(n):0),lr=n=>U(()=>Sn(n,1)?Yt(n,(r,a)=>Ft(a,r)):0),ur=(n,r)=>U(a=>Ds($n(a,ka(r)?r(Ht(a)):r),l=>Ft(a,l)),n),fr=n=>U(()=>{Yt(n[0],(r,a)=>Rs(r)?Yn(a):Yt(r,(l,f)=>Rs(l)?qn(a,f):Yt(l,(C,E)=>_a(es,a,f,E,C)))),Yt(n[1],(r,a)=>Ma(es,a,r))}),xn=n=>{try{Ln(br(n))}catch{}return es},Sr=n=>{try{Rn(br(n))}catch{}return es},$r=n=>U(()=>{try{const[r,a]=br(n);Ln(r),Rn(a)}catch{xn(n)}}),Gn=n=>U(()=>{if((s=Je(n))&&(Cn(n),!j(V))){const r=Ee();Qt(),Bt(r)}}),Jn=n=>U(()=>{if(t=jc(n)){const r=Ve();Pe(),xt(),t=!0,Tn(n),jt(r)}}),dr=(n,r)=>U(()=>{Gn(n),Jn(r)}),Qt=()=>U(()=>gn({})),Yn=n=>U(r=>_s(V,r)?wn(r):0,n),qn=(n,r)=>U((a,l)=>Ds(D(V,a),f=>_s(f,l)?bn(a,f,l):0),n,r),Cr=(n,r,a,l)=>U((f,C,E)=>Ds(D(V,f),P=>Ds(D(P,C),N=>_s(N,E)?Vn(f,P,C,N,E,l):0)),n,r,a),xt=()=>U(()=>hn({})),Tr=n=>U(r=>_s(k,r)?An(r):0,n),Kn=()=>U(()=>{Cn({}),s=!1}),Pe=()=>U(()=>{Tn({}),t=!1}),Lr=()=>U(()=>{Kn(),Pe()}),De=(n,r)=>{if(c!=-1){Xn();const a=n();return Zn(r),a}},Xn=()=>{var n;return c!=-1&&c++,c==1&&((n=i[0])==null||n.call(i),H(ws)),es},gr=()=>[qs(L,(n,r)=>D(u,r)===-1?void 0:qs(n,(a,l)=>D(D(S,r),l)===-1?void 0:qs(a,([,f])=>f,f=>Uo(f)),j,Et),j,Et),qs(h,([,n])=>n,n=>Uo(n)),1],yr=()=>[!j(L),!j(h),Fo(L,pa,Uo),Fo(w),qs(h,pa,Uo),qs(A),qs(u),Nr(S),Fo(T),qs(R)],Zn=n=>{var r,a;return c>0&&(c--,c==0&&(c=1,Mn(1),j(L)||pn(1),Fn(1),j(h)||Un(1),n!=null&&n(es)&&(Q(L,(l,f)=>Q(l,(C,E)=>Q(C,([P],N)=>_a(es,f,E,N,P)))),uo(L),Q(h,([l],f)=>Ma(es,f,l)),uo(h)),H(zs[0],void 0),c=-1,Mn(0),j(L)||pn(0),Fn(0),j(h)||Un(0),(r=i[1])==null||r.call(i),H(zs[1],void 0),(a=i[2])==null||a.call(i),c=0,e=Wt(),o=Ot(),Ue([u,d,$,S,T,L,w,R,h,A],uo))),es},es={getContent:Yc,getTables:Ee,getTableIds:$s,getTable:qc,getTableCellIds:zn,getRowCount:Hn,getRowIds:Zs,getSortedRowIds:we,getRow:Kc,getCellIds:be,getCell:zt,getValues:Ve,getValueIds:Ae,getValue:Ht,hasTables:Wt,hasTable:Wn,hasTableCell:On,hasRow:Bn,hasCell:jn,hasValues:Ot,hasValue:Qn,getTablesJson:Xc,getValuesJson:Zc,getJson:Ic,getTablesSchemaJson:sr,getValuesSchemaJson:tr,getSchemaJson:er,hasTablesSchema:()=>s,hasValuesSchema:()=>t,setContent:nr,setTables:Bt,setTable:or,setRow:cr,addRow:rr,setPartialRow:ar,setCell:ir,setValues:jt,setPartialValues:lr,setValue:ur,applyChanges:fr,setTablesJson:xn,setValuesJson:Sr,setJson:$r,setTablesSchema:Gn,setValuesSchema:Jn,setSchema:dr,delTables:Qt,delTable:Yn,delRow:qn,delCell:Cr,delValues:xt,delValue:Tr,delTablesSchema:Kn,delValuesSchema:Pe,delSchema:Lr,transaction:De,startTransaction:Xn,getTransactionChanges:gr,getTransactionLog:yr,finishTransaction:Zn,forEachTable:n=>Q(V,(r,a)=>n(a,l=>Q(r,(f,C)=>l(C,E=>Is(f,E))))),forEachTableCell:(n,r)=>Is(D(K,rs(n)),r),forEachRow:(n,r)=>Q(D(V,rs(n)),(a,l)=>r(l,f=>Is(a,f))),forEachCell:(n,r,a)=>Is(D(D(V,rs(n)),rs(r)),a),forEachValue:n=>Is(k,n),addSortedRowIdsListener:(n,r,a,l,f,C,E)=>{let P=we(n,r,a,l,f);return ps(()=>{const N=we(n,r,a,l,f);Sl(N,P)||(P=N,C(es,n,r,a,l,f,P))},ds[E?1:0],[n,r],[$s])},addStartTransactionListener:n=>ps(n,ws),addWillFinishTransactionListener:n=>ps(n,zs[0]),addDidFinishTransactionListener:n=>ps(n,zs[1]),callListener:n=>(js(n),es),delListener:n=>(It(n),es),getListenerStats:()=>({hasTables:bs(Ts),tables:bs(M),tableIds:bs(Z),hasTable:bs(Ls),table:bs(ts),tableCellIds:bs(F),hasTableCell:bs(J,Xe),rowCount:bs(us),rowIds:bs(cs),sortedRowIds:bs(ds),hasRow:bs(hs,Xe),row:bs(ys,Xe),cellIds:bs(X,Xe),hasCell:bs(ss,Er),cell:bs(gs,Er),invalidCell:bs(Ms,Er),hasValues:bs(B),values:bs(y),valueIds:bs(O),hasValue:bs(Es),value:bs(Fs),invalidValue:bs(Ns),transaction:bc(ws)+bs(zs)}),isMergeable:()=>!1,createStore:lS,addListener:ps,callListeners:H,setInternalListeners:(n,r,a,l,f)=>i=[n,r,a,l,f]};return Yt({[ve+Aa]:[0,Ts,[],()=>[Wt()]],[Aa]:[0,M],[Of]:[0,Z],[ve+Ke]:[1,Ls,[$s],n=>[Wn(...n)]],[Ke]:[1,ts,[$s]],[Ke+Pa]:[1,F,[$s]],[ve+Ke+Ko]:[2,J,[$s,zn],n=>[On(...n)]],[Bf]:[1,us,[$s]],[jf]:[1,cs,[$s]],[ve+Xo]:[2,hs,[$s,Zs],n=>[Bn(...n)]],[Xo]:[2,ys,[$s,Zs]],[Pa]:[2,X,[$s,Zs]],[ve+Ko]:[3,ss,[$s,Zs,be],n=>[jn(...n)]],[Ko]:[3,gs,[$s,Zs,be],n=>po(zt(...n))],InvalidCell:[3,Ms],[ve+Da]:[0,B,[],()=>[Ot()]],[Da]:[0,y],[Qf]:[0,O],[ve+Zo]:[1,Es,[Ae],n=>[Qn(...n)]],[Zo]:[1,Fs,[Ae],n=>po(Ht(n[0]))],InvalidValue:[1,Ns]},([n,r,a,l],f)=>{es[Wf+f+Hf]=(...C)=>ps(C[n],r[C[n+1]?1:0],n>0?va(C,0,n):void 0,a,l)}),dl(es)},sc="",Vt=s=>s==null,yo=(s,t,e)=>Vt(s)?e==null?void 0:e():t(s),Mr=s=>Array.isArray(s),He=s=>s.length,uS=(s,t)=>s.test(t),yl=s=>{throw new Error(s)},Fr=(s,t)=>s.forEach(t),fS=(s,t)=>s.splice(0,t),ra=(s,...t)=>s.push(...t),Rl=s=>s.shift(),Vc=Object,Ua=s=>Vc.getPrototypeOf(s),SS=s=>!Vt(s)&&yo(Ua(s),t=>t==Vc.prototype||Vt(Ua(t)),()=>!0),$S=Vc.keys,dS=Vc.freeze,CS=s=>He($S(s)),zo=s=>SS(s)&&CS(s)==0,TS=s=>(s==null?void 0:s.size)??0,LS=(s,t)=>(s==null?void 0:s.has(t))??!1,hl=s=>Vt(s)||TS(s)==0,El=(s,t)=>s==null?void 0:s.forEach(t),wl=(s,t)=>s==null?void 0:s.delete(t),Do=s=>new Map(s),$t=(s,t)=>s==null?void 0:s.get(t),We=(s,t,e)=>Vt(e)?(wl(s,t),s):s==null?void 0:s.set(t,e),pr=(s,t,e,o)=>(LS(s,t)?o==null||o($t(s,t)):We(s,t,e()),$t(s,t)),Ur=(s,t,e,o,c=0)=>yo((e?pr:$t)(s,t[c],c>He(t)-2?e:Do),i=>{if(c>He(t)-2)return o!=null&&o(i)&&We(s,t[c]),i;const u=Ur(i,t,e,o,c+1);return hl(i)&&We(s,t[c]),u}),gS=s=>new Set(Mr(s)||Vt(s)?s:[s]),yS=(s,t)=>s==null?void 0:s.add(t),RS=/^\d+$/,hS=()=>{const s=[];let t=0;return[e=>(e?Rl(s):null)??sc+t++,e=>{uS(RS,e)&&He(s)<1e3&&ra(s,e)}]},ES=(s,t=[sc])=>{const e=[],o=(c,i)=>i==He(t)?ra(e,c):t[i]===null?El(c,u=>o(u,i+1)):Fr([t[i],null],u=>o($t(c,u),i+1));return o(s,0),e},wS=s=>{let t;const[e,o]=hS(),c=Do();return[(S,T,L,R=[],h=()=>[])=>{t??(t=s());const w=e(1);return We(c,w,[S,T,L,R,h]),yS(Ur(T,L??[sc],gS),w),w},(S,T,...L)=>Fr(ES(S,T),R=>El(R,h=>$t(c,h)[0](t,...T??[],...L))),S=>yo($t(c,S),([,T,L])=>(Ur(T,L??[sc],void 0,R=>(wl(R,S),hl(R)?1:0)),We(c,S),o(S),L)),S=>yo($t(c,S),([T,,L=[],R,h])=>{const w=(...A)=>{var v;const _=He(A);_==He(L)?T(t,...A,...h(A)):Vt(L[_])?Fr(((v=R[_])==null?void 0:v.call(R,...A))??[],b=>w(...A,b)):w(...A,L[_])};w()})]},Ho=Do(),Wo=Do(),bS=(s=1,t)=>s!=1&&t.isMergeable()?[1,t.getMergeableContent,t.getTransactionMergeableChanges,([[e],[o]])=>!zo(e)||!zo(o),t.setDefaultContent]:s!=2?[0,t.getContent,t.getTransactionChanges,([e,o])=>!zo(e)||!zo(o),t.setContent]:yl("Store type not supported by this Persister"),yC=(s,t,e,o,c,i,u,d={},$=[])=>{let S=0,T=0,L=0,R,h,w;pr(Ho,$,()=>0),pr(Wo,$,()=>[]);const A=Do(),[_,v,b,os,fs]=bS(u,s),[Ss,K,V]=wS(()=>B),k=y=>{y!=S&&(S=y,K(A,void 0,S))},Ts=async()=>{if(!$t(Ho,$)){for(We(Ho,$,1);!Vt(R=Rl($t(Wo,$)));)try{await R()}catch{}We(Ho,$,0)}},M=y=>{(_&&Mr(y==null?void 0:y[0])?(y==null?void 0:y[2])===1?s.applyMergeableChanges:s.setMergeableContent:(y==null?void 0:y[2])===1?s.applyChanges:s.setContent)(y)},Z=async y=>(S!=2&&(k(1),T++,await ss(async()=>{try{const O=await t();Mr(O)?M(O):yl(`Content is not an array ${O}`)}catch{y&&fs(y)}k(0)})),B),Ls=async y=>{await ts().load(y);try{h=await o(async(O,Es)=>{Es||O?S!=2&&(k(1),T++,M(Es??O),k(0)):await Z()})}catch{}return B},ts=()=>(h&&(c(h),h=void 0),B),F=()=>!Vt(h),J=async y=>(S!=1&&(k(2),L++,await ss(async()=>{try{await e(v,y)}catch{}k(0)})),B),us=async()=>(await cs().save(),w=s.addDidFinishTransactionListener(()=>{const y=b();os(y)&&J(y)}),B),cs=()=>(yo(w,s.delListener),w=void 0,B),ds=()=>!Vt(w),hs=()=>S,ys=y=>Ss(y,A),X=y=>(V(y),s),ss=async(...y)=>(ra($t(Wo,$),...y),await Ts(),B),B={load:Z,startAutoLoad:Ls,stopAutoLoad:ts,isAutoLoading:F,save:J,startAutoSave:us,stopAutoSave:cs,isAutoSaving:ds,getStatus:hs,addStatusListener:ys,delListener:X,schedule:ss,getStore:()=>s,destroy:()=>(fS($t(Wo,$)),ts().stopAutoSave()),getStats:()=>({loads:T,saves:L}),...d};return dS(B)},tc="",bl="￼",VS=globalThis,za=VS.window,At=s=>s==null,Ro=(s,t,e)=>At(s)?e==null?void 0:e():t(s),zr=s=>Array.isArray(s),Oe=s=>s.length,AS=(s,t)=>s.test(t),Vl=s=>{throw new Error(s)},Hr=(s,t)=>s.forEach(t),PS=(s,t)=>s.splice(0,t),aa=(s,...t)=>s.push(...t),Al=s=>s.shift(),Ac=Object,Ha=s=>Ac.getPrototypeOf(s),DS=s=>!At(s)&&Ro(Ha(s),t=>t==Ac.prototype||At(Ha(t)),()=>!0),kS=Ac.keys,vS=Ac.freeze,NS=s=>Oe(kS(s)),Oo=s=>DS(s)&&NS(s)==0,mS=JSON.stringify,Pl=JSON.parse,_S=s=>mS(s,(t,e)=>e===void 0?bl:e),MS=s=>Pl(s,(t,e)=>e===bl?void 0:e),FS=s=>(s==null?void 0:s.size)??0,pS=(s,t)=>(s==null?void 0:s.has(t))??!1,Dl=s=>At(s)||FS(s)==0,kl=(s,t)=>s==null?void 0:s.forEach(t),vl=(s,t)=>s==null?void 0:s.delete(t),ko=s=>new Map(s),dt=(s,t)=>s==null?void 0:s.get(t),Be=(s,t,e)=>At(e)?(vl(s,t),s):s==null?void 0:s.set(t,e),Wr=(s,t,e,o)=>(pS(s,t)?o==null||o(dt(s,t)):Be(s,t,e()),dt(s,t)),Or=(s,t,e,o,c=0)=>Ro((e?Wr:dt)(s,t[c],c>Oe(t)-2?e:ko),i=>{if(c>Oe(t)-2)return o!=null&&o(i)&&Be(s,t[c]),i;const u=Or(i,t,e,o,c+1);return Dl(i)&&Be(s,t[c]),u}),US=s=>new Set(zr(s)||At(s)?s:[s]),zS=(s,t)=>s==null?void 0:s.add(t),HS=/^\d+$/,WS=()=>{const s=[];let t=0;return[e=>(e?Al(s):null)??tc+t++,e=>{AS(HS,e)&&Oe(s)<1e3&&aa(s,e)}]},OS=(s,t=[tc])=>{const e=[],o=(c,i)=>i==Oe(t)?aa(e,c):t[i]===null?kl(c,u=>o(u,i+1)):Hr([t[i],null],u=>o(dt(c,u),i+1));return o(s,0),e},BS=s=>{let t;const[e,o]=WS(),c=ko();return[(S,T,L,R=[],h=()=>[])=>{t??(t=s());const w=e(1);return Be(c,w,[S,T,L,R,h]),zS(Or(T,L??[tc],US),w),w},(S,T,...L)=>Hr(OS(S,T),R=>kl(R,h=>dt(c,h)[0](t,...T??[],...L))),S=>Ro(dt(c,S),([,T,L])=>(Or(T,L??[tc],void 0,R=>(vl(R,S),Dl(R)?1:0)),Be(c,S),o(S),L)),S=>Ro(dt(c,S),([T,,L=[],R,h])=>{const w=(...A)=>{var v;const _=Oe(A);_==Oe(L)?T(t,...A,...h(A)):At(L[_])?Hr(((v=R[_])==null?void 0:v.call(R,...A))??[],b=>w(...A,b)):w(...A,L[_])};w()})]},Bo=ko(),jo=ko(),jS=(s=1,t)=>s!=1&&t.isMergeable()?[1,t.getMergeableContent,t.getTransactionMergeableChanges,([[e],[o]])=>!Oo(e)||!Oo(o),t.setDefaultContent]:s!=2?[0,t.getContent,t.getTransactionChanges,([e,o])=>!Oo(e)||!Oo(o),t.setContent]:Vl("Store type not supported by this Persister"),QS=(s,t,e,o,c,i,u,d={},$=[])=>{let S=0,T=0,L=0,R,h,w;Wr(Bo,$,()=>0),Wr(jo,$,()=>[]);const A=ko(),[_,v,b,os,fs]=jS(u,s),[Ss,K,V]=BS(()=>B),k=y=>{y!=S&&(S=y,K(A,void 0,S))},Ts=async()=>{if(!dt(Bo,$)){for(Be(Bo,$,1);!At(R=Al(dt(jo,$)));)try{await R()}catch{}Be(Bo,$,0)}},M=y=>{(_&&zr(y==null?void 0:y[0])?(y==null?void 0:y[2])===1?s.applyMergeableChanges:s.setMergeableContent:(y==null?void 0:y[2])===1?s.applyChanges:s.setContent)(y)},Z=async y=>(S!=2&&(k(1),T++,await ss(async()=>{try{const O=await t();zr(O)?M(O):Vl(`Content is not an array ${O}`)}catch{y&&fs(y)}k(0)})),B),Ls=async y=>{await ts().load(y);try{h=await o(async(O,Es)=>{Es||O?S!=2&&(k(1),T++,M(Es??O),k(0)):await Z()})}catch{}return B},ts=()=>(h&&(c(h),h=void 0),B),F=()=>!At(h),J=async y=>(S!=1&&(k(2),L++,await ss(async()=>{try{await e(v,y)}catch{}k(0)})),B),us=async()=>(await cs().save(),w=s.addDidFinishTransactionListener(()=>{const y=b();os(y)&&J(y)}),B),cs=()=>(Ro(w,s.delListener),w=void 0,B),ds=()=>!At(w),hs=()=>S,ys=y=>Ss(y,A),X=y=>(V(y),s),ss=async(...y)=>(aa(dt(jo,$),...y),await Ts(),B),B={load:Z,startAutoLoad:Ls,stopAutoLoad:ts,isAutoLoading:F,save:J,startAutoSave:us,stopAutoSave:cs,isAutoSaving:ds,getStatus:hs,addStatusListener:ys,delListener:X,schedule:ss,getStore:()=>s,destroy:()=>(PS(dt(jo,$)),ts().stopAutoSave()),getStats:()=>({loads:T,saves:L}),...d};return vS(B)},Wa="storage",Nl=(s,t,e,o)=>QS(s,async()=>MS(e.getItem(t)),async $=>e.setItem(t,_S($())),$=>{const S=T=>{if(T.storageArea===e&&T.key===t)try{$(Pl(T.newValue))}catch{$()}};return za.addEventListener(Wa,S),S},$=>za.removeEventListener(Wa,$),o,3,{getStorageName:()=>t}),RC=(s,t,e)=>Nl(s,t,localStorage,e),hC=(s,t,e)=>Nl(s,t,sessionStorage,e),ho=s=>typeof s,xS="tinybase",ue="",GS=ho(ue),JS=ho(ho),YS="Listener",Pc="Result",qS="get",KS="set",XS="add",ZS="Has",IS="has",mt="Ids",ia="Table",s$=ia+mt,Dc="Row",ml=Dc+"Count",_l=Dc+mt,Ml="Sorted"+Dc+mt,kc="Cell",Fl=kc+mt,vc="Value",t$=vc+"s",e$=vc+mt,pl="Metric",n$="Index",Ul="Slice",o$="Relationship",c$="Remote"+Dc+"Id",r$="Query",a$=globalThis,en=s=>s==null,ec=(s,t,e)=>en(s)?e==null?void 0:e():t(s),zl=s=>ho(s)==GS,Hl=s=>ho(s)==JS,i$=s=>Array.isArray(s),nc=s=>s.length,l$=()=>{},u$=(s,t)=>la(new Array(s).fill(0),(e,o)=>t(o)),Wl=(s,t)=>s.every(t),Vr=(s,t)=>nc(s)===nc(t)&&Wl(s,(e,o)=>t[o]===e),la=(s,t)=>s.map(t),f$=(s,t)=>s.filter(t),Oa=(s,t,e)=>s.with(t,e),{PureComponent:EC,Fragment:wC,createContext:S$,createElement:$$,useCallback:Eo,useContext:ua,useEffect:Ba,useLayoutEffect:bC,useMemo:Ol,useRef:d$,useState:Br,useSyncExternalStore:C$}=qr,Nc=Object,ja=s=>Nc.getPrototypeOf(s),T$=Nc.entries,Qa=s=>!en(s)&&ec(ja(s),t=>t==Nc.prototype||en(ja(t)),()=>!0),Bl=Nc.keys,jl=(s,t)=>ec(s,e=>e[t]),Ql=(s,t)=>t in s,L$=(s,t)=>(delete s[t],s),g$=s=>nc(Bl(s)),xl=(s,t)=>{const e=T$(s);return nc(e)===g$(t)&&Wl(e,([o,c])=>Qa(c)?Qa(t[o])?xl(t[o],c):!1:t[o]===c)},y$=(s,t,e)=>(Ql(s,t)||(s[t]=e()),s[t]),oc=y$(a$,xS+"_uirc",()=>S$([])),rn=(s,t)=>{const e=ua(oc);return en(s)?e[t*2]:zl(s)?jl(e[t*2+1]??{},s):s},vo=(s,t)=>{const e=rn(s,t);return en(s)||zl(s)?e:s},No=s=>Bl(ua(oc)[s*2+1]??{}),R$=()=>No(0),Gl=s=>rn(s,0),it=s=>vo(s,0),h$=()=>No(1),Jl=s=>rn(s,1),Yl=s=>vo(s,1),E$=()=>No(2),ql=s=>rn(s,2),mc=s=>vo(s,2),w$=()=>No(3),Kl=s=>rn(s,3),fa=s=>vo(s,3),b$=()=>No(4),Xl=s=>rn(s,4),mo=s=>vo(s,4),Kt=[],xa=[{},[],[Kt,void 0,Kt],void 0,!1,0],V$=[xl,Vr,([s,t,e],[o,c,i])=>t===c&&Vr(s,o)&&Vr(e,i)],A$=(s,t)=>s===t,P$=(s,t,...e)=>{var c;const o=(c=s==null?void 0:s[XS+t+YS])==null?void 0:c.call(s,...e);return()=>s==null?void 0:s.delListener(o)},vs=(s,t,e,o=Kt)=>{const c=d$(xa[e]),i=Eo(()=>{var $;const d=(($=t==null?void 0:t[(e==4?IS:qS)+s])==null?void 0:$.call(t,...o))??xa[e];return(V$[e]??A$)(d,c.current)?c.current:c.current=d},[t,e,s,...o]),u=Eo(d=>P$(t,(e==4?ZS:ue)+s,...o,d),[t,e,s,...o]);return C$(u,i,i)},Zl=(s,t,e,o=Kt,c=l$,i=Kt,...u)=>{const d=it(s);return Eo($=>ec(d,S=>ec(e($,S),T=>c(S[KS+t](...D$(u,S,$),T),T))),[d,t,...o,...i,...k$(u)])},D$=(s,t,e)=>la(s,o=>Hl(o)?o(e,t):o),k$=s=>f$(s,t=>!Hl(t)),v$=(s,t=Kt)=>Ol(s,t),N$=s=>vs(s$,it(s),1),Sa=(s,t)=>vs(ia+Fl,it(t),1,[s]),m$=(s,t)=>vs(ml,it(t),5,[s]),_$=(s,t)=>vs(_l,it(t),1,[s]),M$=(s,t,e,o=0,c,i)=>vs(Ml,it(i),1,[s,t,e,o,c]),an=(s,t,e,o)=>vs(kc,it(o),3,[s,t,e]),F$=s=>vs(t$,it(s),0),Il=s=>vs(e$,it(s),1),je=(s,t)=>vs(vc,it(t),3,[s]),_c=(s,t,e,o,c,i,u,d)=>Zl(i,kc,o,c,u,d,s,t,e),cc=(s,t,e,o,c,i)=>Zl(o,vc,t,e,c,i,s),p$=s=>vs(pl+mt,Yl(s),1),U$=(s,t)=>vs(pl,Yl(t),3,[s]),z$=(s,t)=>vs(Ul+mt,mc(t),1,[s]),H$=s=>vs(n$+mt,mc(s),1),W$=(s,t,e)=>vs(Ul+_l,mc(e),1,[s,t]),O$=s=>vs(o$+mt,fa(s),1),B$=(s,t,e)=>vs(c$,fa(e),3,[s,t]),j$=s=>vs(r$+mt,mo(s),1),Q$=(s,t)=>vs(Pc+ia+Fl,mo(t),1,[s]),x$=(s,t)=>vs(Pc+ml,mo(t),5,[s]),G$=(s,t,e,o=0,c,i)=>vs(Pc+Ml,mo(i),1,[s,t,e,o,c]),J$=(s,t,e,o)=>vs(Pc+kc,mo(o),3,[s,t,e]),Y$=(s,t,e=Kt,o,c=Kt,i,u=Kt)=>{const[,d]=Br(),[$,S]=Br();return Ba(()=>{(async()=>{const T=s?await t(s):void 0;S(T),T&&o&&(async()=>(await o(T),d([])))()})()},[s,...e,...c]),Ba(()=>()=>{$&&$.destroy()},[$,...u]),$},ee=(s,t,e,o,c)=>[e??t[s*2],{...t[s*2+1],...o,...c[s]}],VC=({store:s,storesById:t,metrics:e,metricsById:o,indexes:c,indexesById:i,relationships:u,relationshipsById:d,queries:$,queriesById:S,checkpoints:T,checkpointsById:L,persister:R,persistersById:h,synchronizer:w,synchronizersById:A,children:_})=>{const v=ua(oc),[b,os]=Br(()=>u$(8,()=>({}))),fs=Eo((K,V,k)=>os(Ts=>jl(Ts[K],V)==k?Ts:Oa(Ts,K,{...Ts[K],[V]:k})),[]),Ss=Eo((K,V)=>os(k=>Ql(k[K],V)?Oa(k,K,L$(k[K],V)):k),[]);return $$(oc.Provider,{value:Ol(()=>[...ee(0,v,s,t,b),...ee(1,v,e,o,b),...ee(2,v,c,i,b),...ee(3,v,u,d,b),...ee(4,v,$,S,b),...ee(5,v,T,L,b),...ee(6,v,R,h,b),...ee(7,v,w,A,b),fs,Ss],[b,s,t,e,o,c,i,u,d,$,S,T,L,R,h,w,A,v,fs,Ss])},_)},$a=(s,t,e,o)=>{const c=en(t)||!i$(s)?s:la(s,(i,u)=>u>0?[t,i]:i);return e?[o,":{",c,"}"]:c},da=({tableId:s,rowId:t,cellId:e,store:o,debugIds:c})=>$a(ue+(an(s,t,e,o)??ue),void 0,c,e),q$=({valueId:s,store:t,debugIds:e})=>$a(ue+(je(s,t)??ue),void 0,e,s),K$=({queryId:s,rowId:t,cellId:e,queries:o,debugIds:c})=>$a(ue+(J$(s,t,e,o)??ue),void 0,c,e),fe=s=>typeof s,Xt="",Mc=fe(Xt),su=fe(!0),Fc=fe(0),X$=fe(fe),Qo="type",ot="default",Z$="Listener",I$="add",me="Has",pc="Ids",pe="Table",Ga=pe+"s",sd=pe+pc,rc="Row",td=rc+"Count",ed=rc+pc,fo="Cell",Ja=fo+pc,nn="Value",jr=nn+"s",nd=nn+pc,Ze="currentTarget",Ya="value",tu="￼",ls=s=>Xt+s,eu=(s,t=Xt,e)=>s.split(t,e),od=globalThis,qa=od.window,nu=Math,cd=nu.min,Ka=nu.floor,rd=isFinite,ad=(s,t)=>s instanceof t,I=s=>s==null,ms=(s,t,e)=>I(s)?e==null?void 0:e():t(s),ou=s=>s==Mc||s==su,id=s=>fe(s)==Mc,Xa=s=>fe(s)==X$,wo=s=>Array.isArray(s),Za=(s,t,e)=>s.slice(t,e),kt=s=>s.length,ld=(s,t)=>s.test(t),cu=s=>{throw new Error(s)},{PureComponent:ud,Fragment:bo,createContext:AC,createElement:g,useCallback:wt,useContext:PC,useEffect:DC,useLayoutEffect:fd,useMemo:_o,useRef:Ia,useState:Fe,useSyncExternalStore:kC}=qr,Ca=(s,...t)=>I(s)?{}:s(...t),Sd=(s,t)=>[s,s==null?void 0:s.getStore(),s==null?void 0:s.getLocalTableId(t),s==null?void 0:s.getRemoteTableId(t)],$d=(s,t)=>[s,s==null?void 0:s.getStore(),s==null?void 0:s.getTableId(t)],dd=(s,t)=>s.includes(t),Cd=(s,t)=>s.every(t),Td=(s,t)=>kt(s)===kt(t)&&Cd(s,(e,o)=>t[o]===e),ru=(s,t)=>s.sort(t),ac=(s,t)=>s.forEach(t),Ld=(s,t=Xt)=>s.join(t),ks=(s,t)=>s.map(t),bt=s=>kt(s)==0,gd=(s,t,e)=>s.reduce(t,e),yd=(s,t)=>s.splice(0,t),Vo=(s,...t)=>s.push(...t),au=s=>s.shift(),Re=Object,si=s=>Re.getPrototypeOf(s),Rd=Re.entries,hd=Re.isFrozen,iu=s=>!I(s)&&ms(si(s),t=>t==Re.prototype||I(si(t)),()=>!0),Ed=Re.keys,lu=Re.freeze,So=(s=[])=>Re.fromEntries(s),ro=(s,t)=>t in s,uu=(s,t)=>(delete s[t],s),Ys=(s,t)=>ks(Rd(s),([e,o])=>t(o,e)),wd=(s,t)=>So(Ys(s,(e,o)=>[o,t(e,o)])),bd=s=>kt(Ed(s)),Xs=s=>iu(s)&&bd(s)==0,ne=(s,t,e,o=0)=>I(s)||!iu(s)||!o&&Xs(s)||hd(s)?(e==null||e(),!1):(Ys(s,(c,i)=>{t(c,i)||uu(s,i)}),o?!0:!Xs(s)),fu=JSON.stringify,ze=JSON.parse,qt=s=>fu(s,(t,e)=>ad(e,Map)?Re.fromEntries([...e]):e),Vd=s=>fu(s,(t,e)=>e===void 0?tu:e),Ad=s=>ze(s,(t,e)=>e===tu?void 0:e),ic="tinybaseInspector",Qr="TinyBase Inspector",Su=["left","top","bottom","right","full"],Se="state",lc="sort",xr="open",uc="position",fc=xr,ti="editable",Rt=(...s)=>qt(s),Uc=(s,t)=>ks(ru([...s]),t),zc=(s,t)=>[!!an(Se,s,ti,t),wt(e=>{t.setCell(Se,s,ti,o=>!o),e.preventDefault()},[t,s])];var Pd="data:image/svg+xml,%3csvg viewBox='0 0 680 680' xmlns='http://www.w3.org/2000/svg' style='width:680px%3bheight:680px'%3e %3cpath stroke='white' stroke-width='80' fill='none' d='M340 617a84 241 90 11.01 0zM131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124zm-12-127a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e %3cpath fill='%23d81b60' d='M131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124z' /%3e %3cpath d='M249 619a94 240 90 00308-128 114 289 70 01-308 128zM119 208a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e%3c/svg%3e";const $u="M20 80l5-15l40-40l10 10l-40 40l-15 5m5-15l10 10",du='content:url("',Cu='")',Hc=du+"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' stroke-width='4' stroke='white' fill='none'>",Wc="</svg>"+Cu,ei=du+Pd+Cu,Dd=ks([[20,20,20,60],[20,20,60,20],[20,60,60,20],[60,20,20,60],[30,30,40,40]],([s,t,e,o])=>Hc+`<rect x='20' y='20' width='60' height='60' fill='grey'/><rect x='${s}' y='${t}' width='${e}' height='${o}' fill='white'/>`+Wc),kd=Hc+"<path d='M20 20l60 60M20 80l60-60' />"+Wc,vd=Hc+`<path d='${$u}' />`+Wc,Nd=Hc+`<path d='${$u}M20 20l60 60' />`+Wc,eo="*::-webkit-scrollbar",md=Ld(Ys({"":"all:initial;font-family:sans-serif;font-size:0.75rem;position:fixed;z-index:999999","*":"all:revert","*::before":"all:revert","*::after":"all:revert",[eo]:"width:0.5rem;height:0.5rem;",[eo+"-track"]:"background:#111",[eo+"-thumb"]:"background:#999;border:1px solid #111",[eo+"-thumb:hover"]:"background:#fff",[eo+"-corner"]:"background:#111",img:"width:1rem;height:1rem;background:#111;border:0;vertical-align:text-bottom",">img":"padding:0.25rem;bottom:0;right:0;position:fixed;"+ei,...So(ks(["bottom:0;left:0","top:0;right:0"],(s,t)=>[`>img[data-position='${t}']`,s])),main:"display:flex;flex-direction:column;background:#111d;color:#fff;position:fixed;",...So(ks(["bottom:0;left:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:30vh","bottom:0;left:0;width:100vw;height:30vh","top:0;right:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:100vh"],(s,t)=>[`main[data-position='${t}']`,s])),header:"display:flex;padding:0.25rem;background:#000;align-items:center","header>img:nth-of-type(1)":ei,"header>img:nth-of-type(6)":kd,...So(ks(Dd,(s,t)=>[`header>img[data-id='${t}']`,s])),"header>span":"flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-left:0.25rem",article:"padding:0.25rem 0.25rem 0.25rem 0.5rem;overflow:auto;flex:1",details:"margin-left:0.75rem;width:fit-content;","details img":"display:none","details[open]>summary img":"display:unset;background:none;margin-left:0.25rem","details[open]>summary img.edit":vd,"details[open]>summary img.done":Nd,summary:"margin-left:-0.75rem;line-height:1.25rem;user-select:none;width:fit-content",table:"border-collapse:collapse;table-layout:fixed;margin-bottom:0.5rem","table input":"background:#111;color:unset;padding:0 0.25rem;border:0;font-size:unset;vertical-align:top;margin:0",'table input[type="number"]':"width:4rem","table tbody button":"font-size:0;background:#fff;border-radius:50%;margin:0 0.125rem 0 0;width:0.85rem;color:#111","table button:first-letter":"font-size:0.75rem",thead:"background:#222","th:nth-of-type(1)":"min-width:2rem;","th.sorted":"background:#000","table caption":"text-align:left;white-space:nowrap;line-height:1.25rem",button:"width:1.5rem;border:none;background:none;color:#fff;padding:0","button[disabled]":"color:#777","button.next":"margin-right:0.5rem",[`th,#${ic} td`]:"overflow:hidden;text-overflow:ellipsis;padding:0.25rem 0.5rem;max-width:12rem;white-space:nowrap;border-width:1px 0;border-style:solid;border-color:#777;text-align:left","span.warn":"margin:0.25rem;color:#d81b60"},(s,t)=>s?`#${ic} ${t}{${s}}`:"")),_d=({s})=>{const t=je(uc,s)??1,e=cc(fc,()=>!0,[],s);return je(fc,s)?null:g("img",{onClick:e,title:Qr,"data-position":t})},ht=({uniqueId:s,summary:t,editable:e,handleEditable:o,children:c,s:i})=>{const u=!!an(Se,s,xr,i),d=_c(Se,s,xr,$=>$[Ze].open,[],i);return g("details",{open:u,onToggle:d},g("summary",null,t,o?g("img",{onClick:o,className:e?"done":"edit"}):null),c)},qe=s=>{const t=fe(s);return ou(t)||t==Fc&&rd(s)?t:void 0},ni=(s,t,e,o,c)=>I(c)?s.delCell(t,e,o,!0):s.setCell(t,e,o,c),oi=(s,t,e)=>I(e)?s.delValue(t):s.setValue(t,e),Ar=(s,t,e,o)=>s==Mc?t:s==Fc?e:o,Tu=".",Lu="editable",Md="←",Fd="↑",pd="→",Ud="↓",ci=(s,t)=>ks(Sa(s,t),e=>s+Tu+e),Sc=(s,t,e)=>{const o=wt(s,t);return e?o:void 0},Oc=(...s)=>_o(()=>s,s),gu=(s,t)=>_o(()=>({store:s,tableId:t}),[s,t]),zd=(s,t)=>_o(()=>({queries:s,queryId:t}),[s,t]),yu=(s,t=!1,e,o=0,c,i,u,d)=>{const[[$,S,T],L]=Fe([s,t,o]),R=wt(_=>{L(_),d==null||d(_)},[d]),h=Sc(_=>R([_,_==$?!S:!1,T]),[R,$,S,T],e),w=wt(_=>R([$,S,_]),[R,$,S]),A=u===!0?Gd:u;return[[$,S,T],h,_o(()=>u===!1?null:g(A,{offset:T,limit:c,total:i,onChange:w}),[u,A,T,c,i,w])]},Bc=(s,t,e)=>_o(()=>{const o=t??s;return wd(wo(o)?So(ks(o,c=>[c,c])):o,(c,i)=>({label:i,component:e,...id(c)?{label:c}:c}))},[t,e,s]),Ta=({className:s,headerRow:t,idColumn:e,params:[o,c,i,u,d,$]})=>g("table",{className:s},$?g("caption",null,$):null,t===!1?null:g("thead",null,g("tr",null,e===!1?null:g(ri,{sort:u??[],label:"Id",onClick:d}),Ys(o,({label:S},T)=>g(ri,{key:T,cellId:T,label:S,sort:u??[],onClick:d})))),g("tbody",null,ks(i,S=>g("tr",{key:S},e===!1?null:g("th",null,S),Ys(o,({component:T,getComponentProps:L},R)=>g("td",{key:R},g(T,{...Ca(L,S,R),...c,rowId:S,cellId:R}))))))),ri=({cellId:s,sort:[t,e],label:o=s??Xt,onClick:c})=>g("th",{onClick:Sc(()=>c==null?void 0:c(s),[c,s],c),className:I(e)||t!=s?void 0:`sorted ${e?"de":"a"}scending`},I(e)||t!=s?null:(e?Ud:Fd)+" ",o),Hd=({localRowId:s,params:[t,e,o,c,i,u,d]})=>{const $=B$(i,s,u);return g("tr",null,t===!1?null:g(bo,null,g("th",null,s),g("th",null,$)),Ys(e,({component:S,getComponentProps:T},L)=>{const[R,h]=eu(L,Tu,2),w=R===o?s:R===c?$:null;return I(w)?null:g("td",{key:L},g(S,{...Ca(T,w,h),store:d,tableId:R,rowId:w,cellId:h}))}))},Ru=({thing:s,onThingChange:t,className:e,hasSchema:o,showType:c=!0})=>{const[i,u]=Fe(),[d,$]=Fe(),[S,T]=Fe(),[L,R]=Fe(),[h,w]=Fe();d!==s&&(u(qe(s)),$(s),T(String(s)),R(Number(s)||0),w(!!s));const A=wt((v,b)=>{b(v),$(v),t(v)},[t]),_=wt(()=>{if(!(o!=null&&o())){const v=Ar(i,Fc,su,Mc),b=Ar(v,S,L,h);u(v),$(b),t(b)}},[o,t,S,L,h,i]);return g("div",{className:e},c?g("button",{className:i,onClick:_},i):null,Ar(i,g("input",{key:i,value:S,onChange:wt(v=>A(String(v[Ze][Ya]),T),[A])}),g("input",{key:i,type:"number",value:L,onChange:wt(v=>A(Number(v[Ze][Ya]||0),R),[A])}),g("input",{key:i,type:"checkbox",checked:h,onChange:wt(v=>A(!!v[Ze].checked,w),[A])})))},Wd=({tableId:s,cellId:t,descending:e,offset:o,limit:c,store:i,editable:u,sortOnClick:d,paginator:$=!1,onChange:S,customCells:T,...L})=>{const[R,h,w]=yu(t,e,d,o,c,m$(s,i),$,S);return g(Ta,{...L,params:Oc(Bc(Sa(s,i),T,u?La:da),gu(i,s),M$(s,...R,c,i),R,h,w)})},Od=({store:s,editable:t=!1,valueComponent:e=t?xd:q$,getValueComponentProps:o,className:c,headerRow:i,idColumn:u})=>g("table",{className:c},i===!1?null:g("thead",null,g("tr",null,u===!1?null:g("th",null,"Id"),g("th",null,nn))),g("tbody",null,ks(Il(s),d=>g("tr",{key:d},u===!1?null:g("th",null,d),g("td",null,g(e,{...Ca(o,d),valueId:d,store:s})))))),Bd=({indexId:s,sliceId:t,indexes:e,editable:o,customCells:c,...i})=>{const[u,d,$]=$d(mc(e),s);return g(Ta,{...i,params:Oc(Bc(Sa($,d),c,o?La:da),gu(d,$),W$(s,t,u))})},jd=({relationshipId:s,relationships:t,editable:e,customCells:o,className:c,headerRow:i,idColumn:u=!0})=>{const[d,$,S,T]=Sd(fa(t),s),L=Bc([...ci(S,$),...ci(T,$)],o,e?La:da),R=Oc(u,L,S,T,s,d,$);return g("table",{className:c},i===!1?null:g("thead",null,g("tr",null,u===!1?null:g(bo,null,g("th",null,S,".Id"),g("th",null,T,".Id")),Ys(L,({label:h},w)=>g("th",{key:w},h)))),g("tbody",null,ks(_$(S,$),h=>g(Hd,{key:h,localRowId:h,params:R}))))},Qd=({queryId:s,cellId:t,descending:e,offset:o,limit:c,queries:i,sortOnClick:u,paginator:d=!1,customCells:$,onChange:S,...T})=>{const[L,R,h]=yu(t,e,u,o,c,x$(s,i),d,S);return g(Ta,{...T,params:Oc(Bc(Q$(s,i),$,K$),zd(i,s),G$(s,...L,c,i),L,R,h)})},La=({tableId:s,rowId:t,cellId:e,store:o,className:c,showType:i})=>{var u;return g(Ru,{thing:an(s,t,e,o),onThingChange:_c(s,t,e,d=>d,[],o),className:c??Lu+fo,showType:i,hasSchema:(u=it(o))==null?void 0:u.hasTablesSchema})},xd=({valueId:s,store:t,className:e,showType:o})=>{var c;return g(Ru,{thing:je(s,t),onThingChange:cc(s,i=>i,[],t),className:e??Lu+nn,showType:o,hasSchema:(c=it(t))==null?void 0:c.hasValuesSchema})},Gd=({onChange:s,total:t,offset:e=0,limit:o=t,singular:c="row",plural:i=c+"s"})=>{(e>t||e<0)&&(e=0,s(0));const u=Sc(()=>s(e-o),[s,e,o],e>0),d=Sc(()=>s(e+o),[s,e,o],e+o<t);return g(bo,null,t>o&&g(bo,null,g("button",{className:"previous",disabled:e==0,onClick:u},Md),g("button",{className:"next",disabled:e+o>=t,onClick:d},pd),e+1," to ",cd(t,e+o)," of "),t," ",t!=1?i:c)},Jd=({indexes:s,indexesId:t,indexId:e,s:o})=>g(ht,{uniqueId:Rt("i",t,e),summary:"Index: "+e,s:o},ks(z$(e,s),c=>g(Yd,{indexes:s,indexesId:t,indexId:e,sliceId:c,s:o,key:c}))),Yd=({indexes:s,indexesId:t,indexId:e,sliceId:o,s:c})=>{const i=Rt("i",t,e,o),[u,d]=zc(i,c);return g(ht,{uniqueId:i,summary:"Slice: "+o,editable:u,handleEditable:d,s:c},g(Bd,{sliceId:o,indexId:e,indexes:s,editable:u}))},ai=({indexesId:s,s:t})=>{const e=ql(s),o=H$(e);return I(e)?null:g(ht,{uniqueId:Rt("i",s),summary:"Indexes: "+(s??ot),s:t},bt(o)?"No indexes defined":Uc(o,c=>g(Jd,{indexes:e,indexesId:s,indexId:c,s:t,key:c})))},qd=({metrics:s,metricId:t})=>g("tr",null,g("th",null,t),g("td",null,s==null?void 0:s.getTableId(t)),g("td",null,U$(t,s))),ii=({metricsId:s,s:t})=>{const e=Jl(s),o=p$(e);return I(e)?null:g(ht,{uniqueId:Rt("m",s),summary:"Metrics: "+(s??ot),s:t},bt(o)?"No metrics defined":g("table",null,g("thead",null,g("th",null,"Metric Id"),g("th",null,"Table Id"),g("th",null,"Metric")),g("tbody",null,ks(o,c=>g(qd,{metrics:e,metricId:c,key:c})))))},Kd=({queries:s,queriesId:t,queryId:e,s:o})=>{const c=Rt("q",t,e),[i,u,d]=ze(an(Se,c,lc,o)??"[]"),$=_c(Se,c,lc,qt,[],o);return g(ht,{uniqueId:c,summary:"Query: "+e,s:o},g(Qd,{queryId:e,queries:s,cellId:i,descending:u,offset:d,limit:10,paginator:!0,sortOnClick:!0,onChange:$}))},li=({queriesId:s,s:t})=>{const e=Xl(s),o=j$(e);return I(e)?null:g(ht,{uniqueId:Rt("q",s),summary:"Queries: "+(s??ot),s:t},bt(o)?"No queries defined":Uc(o,c=>g(Kd,{queries:e,queriesId:s,queryId:c,s:t,key:c})))},Xd=({relationships:s,relationshipsId:t,relationshipId:e,s:o})=>{const c=Rt("r",t,e),[i,u]=zc(c,o);return g(ht,{uniqueId:c,summary:"Relationship: "+e,editable:i,handleEditable:u,s:o},g(jd,{relationshipId:e,relationships:s,editable:i}))},ui=({relationshipsId:s,s:t})=>{const e=Kl(s),o=O$(e);return I(e)?null:g(ht,{uniqueId:Rt("r",s),summary:"Relationships: "+(s??ot),s:t},bt(o)?"No relationships defined":Uc(o,c=>g(Xd,{relationships:e,relationshipsId:s,relationshipId:c,s:t,key:c})))},Zd=({tableId:s,store:t,storeId:e,s:o})=>{const c=Rt("t",e,s),[i,u,d]=ze(an(Se,c,lc,o)??"[]"),$=_c(Se,c,lc,qt,[],o),[S,T]=zc(c,o);return g(ht,{uniqueId:c,summary:pe+": "+s,editable:S,handleEditable:T,s:o},g(Wd,{tableId:s,store:t,cellId:i,descending:u,offset:d,limit:10,paginator:!0,sortOnClick:!0,onChange:$,editable:S}))},Id=({store:s,storeId:t,s:e})=>{const o=Rt("v",t),[c,i]=zc(o,e);return bt(Il(s))?null:g(ht,{uniqueId:o,summary:jr,editable:c,handleEditable:i,s:e},g(Od,{store:s,editable:c}))},fi=({storeId:s,s:t})=>{const e=Gl(s),o=N$(e);return I(e)?null:g(ht,{uniqueId:Rt("s",s),summary:(e.isMergeable()?"Mergeable":"")+"Store: "+(s??ot),s:t},g(Id,{storeId:s,store:e,s:t}),Uc(o,c=>g(Zd,{store:e,storeId:s,tableId:c,s:t,key:c})))},sC=({s})=>{const t=Ia(null),e=Ia(0),[o,c]=Fe(!1),{scrollLeft:i,scrollTop:u}=F$(s);fd(()=>{const b=t.current;if(b&&!o){const os=new MutationObserver(()=>{b.scrollWidth>=Ka(i)+b.clientWidth&&b.scrollHeight>=Ka(u)+b.clientHeight&&b.scrollTo(i,u)});return os.observe(b,{childList:!0,subtree:!0}),()=>os.disconnect()}},[o,i,u]);const d=wt(b=>{const{scrollLeft:os,scrollTop:fs}=b[Ze];cancelIdleCallback(e.current),e.current=requestIdleCallback(()=>{c(!0),s.setPartialValues({scrollLeft:os,scrollTop:fs})})},[s]),$=Gl(),S=R$(),T=Jl(),L=h$(),R=ql(),h=E$(),w=Kl(),A=w$(),_=Xl(),v=b$();return I($)&&bt(S)&&I(T)&&bt(L)&&I(R)&&bt(h)&&I(w)&&bt(A)&&I(_)&&bt(v)?g("span",{className:"warn"},"There are no Stores or other objects to inspect. Make sure you placed the Inspector inside a Provider component."):g("article",{ref:t,onScroll:d},g(fi,{s}),ks(S,b=>g(fi,{storeId:b,s,key:b})),g(ii,{s}),ks(L,b=>g(ii,{metricsId:b,s,key:b})),g(ai,{s}),ks(h,b=>g(ai,{indexesId:b,s,key:b})),g(ui,{s}),ks(A,b=>g(ui,{relationshipsId:b,s,key:b})),g(li,{s}),ks(v,b=>g(li,{queriesId:b,s,key:b})))};class tC extends ud{constructor(e){super(e);ha(this,"componentDidCatch",(e,o)=>console.error(e,o.componentStack));this.state={e:0}}static getDerivedStateFromError(){return{e:1}}render(){return this.state.e?g("span",{className:"warn"},"Inspector error: please see console for details."):this.props.children}}const eC=({s})=>{const t=je(uc,s)??1,e=cc(fc,()=>!1,[],s),o=cc(uc,c=>Number(c[Ze].dataset.id),[],s);return g("header",null,g("img",{title:Qr}),g("span",null,Qr),ks(Su,(c,i)=>i==t?null:g("img",{onClick:o,"data-id":i,title:"Dock to "+c,key:i})),g("img",{onClick:e,title:"Close"}))},nC=({s})=>{const t=je(uc,s)??1;return je(fc,s)?g("main",{"data-position":t},g(eC,{s}),g(tC,null,g(sC,{s}))):null},ga=s=>t=>gd(oC(t),(e,o)=>e+s(o),0),ya=s=>(s==null?void 0:s.size)??0,Ra=ga(ya),ao=ga(Ra),Pr=ga(ao),Js=(s,t)=>(s==null?void 0:s.has(t))??!1,Y=s=>I(s)||ya(s)==0,oC=s=>[...(s==null?void 0:s.values())??[]],Dr=s=>s.clear(),ns=(s,t)=>s==null?void 0:s.forEach(t),$c=(s,t)=>s==null?void 0:s.delete(t),q=s=>new Map(s),no=s=>[...(s==null?void 0:s.keys())??[]],m=(s,t)=>s==null?void 0:s.get(t),oe=(s,t)=>ns(s,(e,o)=>t(o,e)),cC=(s,t)=>ks([...(s==null?void 0:s.entries())??[]],([e,o])=>t(o,e)),as=(s,t,e)=>I(e)?($c(s,t),s):s==null?void 0:s.set(t,e),Us=(s,t,e,o)=>(Js(s,t)?o==null||o(m(s,t)):as(s,t,e()),m(s,t)),_e=(s,t,e,o=as)=>(Ys(t,(c,i)=>e(s,i,c)),oe(s,c=>ro(t,c)?0:o(s,c)),s),Ks=(s,t,e,o)=>{const c={};return ns(s,(i,u)=>{if(!(e!=null&&e(i,u))){const d=t?t(i,u):i;o!=null&&o(d)||(c[u]=d)}}),c},Gr=(s,t,e)=>Ks(s,o=>Ks(o,t,e),Y,Xs),xo=(s,t,e)=>Ks(s,o=>Gr(o,t,e),Y,Xs),re=(s,t)=>{const e=q();return ns(s,(o,c)=>e.set(c,(t==null?void 0:t(o))??o)),e},Jr=s=>re(s,re),kr=s=>re(s,Jr),Yr=(s,t,e,o,c=0)=>ms((e?Us:m)(s,t[c],c>kt(t)-2?e:q),i=>{if(c>kt(t)-2)return o!=null&&o(i)&&as(s,t[c]),i;const u=Yr(i,t,e,o,c+1);return Y(i)&&as(s,t[c]),u}),io=s=>new Set(wo(s)||I(s)?s:[s]),lo=(s,t)=>s==null?void 0:s.add(t),rC=/^\d+$/,hu=()=>{const s=[];let t=0;return[e=>(e?au(s):null)??Xt+t++,e=>{ld(rC,e)&&kt(s)<1e3&&Vo(s,e)}]},aC=(s,t=[Xt])=>{const e=[],o=(c,i)=>i==kt(t)?Vo(e,c):t[i]===null?ns(c,u=>o(u,i+1)):ac([t[i],null],u=>o(m(c,u),i+1));return o(s,0),e},Eu=s=>{let t;const[e,o]=hu(),c=q();return[(S,T,L,R=[],h=()=>[])=>{t??(t=s());const w=e(1);return as(c,w,[S,T,L,R,h]),lo(Yr(T,L??[Xt],io),w),w},(S,T,...L)=>ac(aC(S,T),R=>ns(R,h=>m(c,h)[0](t,...T??[],...L))),S=>ms(m(c,S),([,T,L])=>(Yr(T,L??[Xt],void 0,R=>($c(R,S),Y(R)?1:0)),as(c,S),o(S),L)),S=>ms(m(c,S),([T,,L=[],R,h])=>{const w=(...A)=>{var v;const _=kt(A);_==kt(L)?T(t,...A,...h(A)):I(L[_])?ac(((v=R[_])==null?void 0:v.call(R,...A))??[],b=>w(...A,b)):w(...A,L[_])};w()})]},Go=q(),Jo=q(),iC=(s=1,t)=>s!=1&&t.isMergeable()?[1,t.getMergeableContent,t.getTransactionMergeableChanges,([[e],[o]])=>!Xs(e)||!Xs(o),t.setDefaultContent]:s!=2?[0,t.getContent,t.getTransactionChanges,([e,o])=>!Xs(e)||!Xs(o),t.setContent]:cu("Store type not supported by this Persister"),lC=(s,t,e,o,c,i,u,d={},$=[])=>{let S=0,T=0,L=0,R,h,w;Us(Go,$,()=>0),Us(Jo,$,()=>[]);const A=q(),[_,v,b,os,fs]=iC(u,s),[Ss,K,V]=Eu(()=>B),k=y=>{y!=S&&(S=y,K(A,void 0,S))},Ts=async()=>{if(!m(Go,$)){for(as(Go,$,1);!I(R=au(m(Jo,$)));)try{await R()}catch{}as(Go,$,0)}},M=y=>{(_&&wo(y==null?void 0:y[0])?(y==null?void 0:y[2])===1?s.applyMergeableChanges:s.setMergeableContent:(y==null?void 0:y[2])===1?s.applyChanges:s.setContent)(y)},Z=async y=>(S!=2&&(k(1),T++,await ss(async()=>{try{const O=await t();wo(O)?M(O):cu(`Content is not an array ${O}`)}catch{y&&fs(y)}k(0)})),B),Ls=async y=>{await ts().load(y);try{h=await o(async(O,Es)=>{Es||O?S!=2&&(k(1),T++,M(Es??O),k(0)):await Z()})}catch{}return B},ts=()=>(h&&(c(h),h=void 0),B),F=()=>!I(h),J=async y=>(S!=1&&(k(2),L++,await ss(async()=>{try{await e(v,y)}catch{}k(0)})),B),us=async()=>(await cs().save(),w=s.addDidFinishTransactionListener(()=>{const y=b();os(y)&&J(y)}),B),cs=()=>(ms(w,s.delListener),w=void 0,B),ds=()=>!I(w),hs=()=>S,ys=y=>Ss(y,A),X=y=>(V(y),s),ss=async(...y)=>(Vo(m(Jo,$),...y),await Ts(),B),B={load:Z,startAutoLoad:Ls,stopAutoLoad:ts,isAutoLoading:F,save:J,startAutoSave:us,stopAutoSave:cs,isAutoSaving:ds,getStatus:hs,addStatusListener:ys,delListener:X,schedule:ss,getStore:()=>s,destroy:()=>(yd(m(Jo,$)),ts().stopAutoSave()),getStats:()=>({loads:T,saves:L}),...d};return lu(B)},Si="storage",uC=(s,t,e,o)=>lC(s,async()=>Ad(e.getItem(t)),async $=>e.setItem(t,Vd($())),$=>{const S=T=>{if(T.storageArea===e&&T.key===t)try{$(ze(T.newValue))}catch{$()}};return qa.addEventListener(Si,S),S},$=>qa.removeEventListener(Si,$),o,3,{getStorageName:()=>t}),fC=(s,t,e)=>uC(s,t,sessionStorage,e),Yo=s=>[s,s],As=(s,t=Ra)=>t(s[0])+t(s[1]),Ps=()=>[q(),q()],$i=s=>[...s],qo=([s,t])=>s===t;eu("-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz");const SC=(s,t)=>(s??0)<(t??0)?-1:1,oo=(s,t,e)=>as(s,t,m(s,t)==-e?void 0:e),wu=()=>{let s,t,e=!1,o=!1,c=0,i=[];const u=q(),d=q(),$=q(),S=q(),T=q(),L=q(),R=q(),h=q(),w=q(),A=q(),_=q(),v=q(),b=q(),os=q(),fs=io(),Ss=q(),K=q(),V=q(),k=q(),Ts=Ps(),M=Ps(),Z=Ps(),Ls=Ps(),ts=Ps(),F=Ps(),J=Ps(),us=Ps(),cs=Ps(),ds=Ps(),hs=Ps(),ys=Ps(),X=Ps(),ss=Ps(),gs=Ps(),Ms=Ps(),Ns=Ps(),B=Ps(),y=Ps(),O=Ps(),Es=Ps(),Fs=Ps(),ws=q(),zs=Ps(),[ps,H,It,js]=Eu(()=>es),Je=n=>ne(n,r=>ne(r,ln)),jc=n=>ne(n,ln),ln=n=>{if(!ne(n,(a,l)=>dd([Qo,ot],l)))return!1;const r=n[Qo];return!ou(r)&&r!=Fc?!1:(qe(n[ot])!=r&&uu(n,ot),!0)},Qc=wo,xc=n=>ne(n,un,Os),un=(n,r)=>(!s||Js(_,r)||Os(r))&&ne(n,(a,l)=>_t(r,l,a),()=>Os(r)),_t=(n,r,a,l)=>ne(l?a:dn(a,n,r),(f,C)=>ms(fn(n,r,C,f),E=>(a[C]=E,!0),()=>!1),()=>Os(n,r)),fn=(n,r,a,l)=>s?ms(m(m(_,n),a),f=>qe(l)!=f[Qo]?Os(n,r,a,l,f[ot]):l,()=>Os(n,r,a,l)):I(qe(l))?Os(n,r,a,l):l,Sn=(n,r)=>ne(r?n:Gc(n),(a,l)=>ms($n(l,a),f=>(n[l]=f,!0),()=>!1),()=>ut()),$n=(n,r)=>t?ms(m(b,n),a=>qe(r)!=a[Qo]?ut(n,r,a[ot]):r,()=>ut(n,r)):I(qe(r))?ut(n,r):r,dn=(n,r,a)=>(ms(m(v,r),([l,f])=>{ns(l,(C,E)=>{ro(n,E)||(n[E]=C)}),ns(f,C=>{ro(n,C)||Os(r,a,C)})}),n),Gc=n=>(t&&(ns(os,(r,a)=>{ro(n,a)||(n[a]=r)}),ns(fs,r=>{ro(n,r)||ut(r)})),n),Cn=n=>_e(_,n,(r,a,l)=>{const f=q(),C=io();_e(Us(_,a,q),l,(E,P,N)=>{as(E,P,N),ms(N[ot],is=>as(f,P,is),()=>lo(C,P))}),as(v,a,[f,C])},(r,a)=>{as(_,a),as(v,a)}),Tn=n=>_e(b,n,(r,a,l)=>{as(b,a,l),ms(l[ot],f=>as(os,a,f),()=>lo(fs,a))},(r,a)=>{as(b,a),as(os,a),$c(fs,a)}),Ln=n=>Xs(n)?Qt():Bt(n),Jc=([n,r])=>{(Xs(n)?Qt:Bt)(n),(Xs(r)?xt:jt)(r)},gn=n=>_e(V,n,(r,a,l)=>Mt(a,l),(r,a)=>wn(a)),Mt=(n,r)=>_e(Us(V,n,()=>(Pn(n,1),as(Ss,n,hu()),as(K,n,q()),q())),r,(a,l,f)=>lt(n,a,l,f),(a,l)=>bn(n,a,l)),lt=(n,r,a,l,f)=>_e(Us(r,a,()=>(Dn(n,a,1),q())),l,(C,E,P)=>he(n,a,C,E,P),(C,E)=>Vn(n,r,a,C,E,f)),he=(n,r,a,l,f)=>{Js(a,l)||kn(n,r,l,1);const C=m(a,l);f!==C&&(vn(n,r,l,C,f),as(a,l,f))},yn=(n,r,a,l,f)=>ms(m(r,a),C=>he(n,a,C,l,f),()=>lt(n,r,a,dn({[l]:f},n,a))),Rn=n=>Xs(n)?xt():jt(n),hn=n=>_e(k,n,(r,a,l)=>Ft(a,l),(r,a)=>An(a)),Ft=(n,r)=>{Js(k,n)||Nn(n,1);const a=m(k,n);r!==a&&(mn(n,a,r),as(k,n,r))},En=(n,r)=>{const[a]=m(Ss,n),l=a(r);return Js(m(V,n),l)?En(n,r):l},pt=n=>m(V,n)??Mt(n,{}),wn=n=>Mt(n,{}),bn=(n,r,a)=>{const[,l]=m(Ss,n);l(a),lt(n,r,a,{},!0)},Vn=(n,r,a,l,f,C)=>{var N;const E=m((N=m(v,n))==null?void 0:N[0],f);if(!I(E)&&!C)return he(n,a,l,f,E);const P=is=>{vn(n,a,is,m(l,is)),kn(n,a,is,-1),as(l,is)};I(E)?P(f):oe(l,P),Y(l)&&(Dn(n,a,-1),Y(as(r,a))&&(Pn(n,-1),as(V,n),as(Ss,n),as(K,n)))},An=n=>{const r=m(os,n);if(!I(r))return Ft(n,r);mn(n,m(k,n)),Nn(n,-1),as(k,n)},Pn=(n,r)=>oo(u,n,r),Dn=(n,r,a)=>oo(Us(S,n,q),r,a)&&as($,n,Us($,n,()=>0)+a),kn=(n,r,a,l)=>{const f=m(K,n),C=m(f,a)??0;(C==0&&l==1||C==1&&l==-1)&&oo(Us(d,n,q),a,l),as(f,a,C!=-l?C+l:null),oo(Us(Us(T,n,q),r,q),a,l)},vn=(n,r,a,l,f)=>{var C;Us(Us(Us(L,n,q),r,q),a,()=>[l,0])[1]=f,(C=i[3])==null||C.call(i,n,r,a,f)},Nn=(n,r)=>oo(R,n,r),mn=(n,r,a)=>{var l;Us(h,n,()=>[r,0])[1]=a,(l=i[4])==null||l.call(i,n,a)},Os=(n,r,a,l,f)=>(Vo(Us(Us(Us(w,n,q),r,q),a,()=>[]),l),f),ut=(n,r,a)=>(Vo(Us(A,n,()=>[]),r),a),Ut=(n,r,a)=>ms(m(m(m(L,n),r),a),([l,f])=>[!0,l,f],()=>[!1,...Yo(zt(n,r,a))]),_n=n=>ms(m(h,n),([r,a])=>[!0,r,a],()=>[!1,...Yo(Ht(n))]),Mn=n=>!Y(w)&&!Y(Ms[n])?ns(n?kr(w):w,(r,a)=>ns(r,(l,f)=>ns(l,(C,E)=>H(Ms[n],[a,f,E],C)))):0,Fn=n=>!Y(A)&&!Y(Ns[n])?ns(n?re(A):A,(r,a)=>H(Ns[n],[a],r)):0,ft=(n,r,a,l)=>{if(!Y(n))return H(r,l,()=>Ks(n)),oe(n,(f,C)=>H(a,[...l??[],f],C==1)),1},pn=n=>{const r=Wt();r!=e&&H(Ts[n],void 0,r);const a=Y(ds[n]),l=Y(X[n])&&Y(ss[n])&&Y(cs[n])&&Y(hs[n])&&Y(F[n])&&Y(J[n])&&Y(us[n])&&a&&Y(Z[n])&&Y(Ls[n]),f=Y(gs[n])&&Y(ys[n])&&Y(ts[n])&&Y(M[n]);if(!l||!f){const C=n?[re(u),Jr(d),re($),Jr(S),kr(T),kr(L)]:[u,d,$,S,T,L];if(!l){ft(C[0],Z[n],Ls[n]),ns(C[1],(P,N)=>ft(P,F[n],J[n],[N])),ns(C[2],(P,N)=>{P!=0&&H(us[n],[N],Hn(N))});const E=io();ns(C[3],(P,N)=>{ft(P,cs[n],hs[n],[N])&&!a&&(H(ds[n],[N,null]),lo(E,N))}),a||ns(C[5],(P,N)=>{if(!Js(E,N)){const is=io();ns(P,Bs=>ns(Bs,([Gt,Jt],St)=>Jt!==Gt?lo(is,St):$c(Bs,St))),ns(is,Bs=>H(ds[n],[N,Bs]))}}),ns(C[4],(P,N)=>ns(P,(is,Bs)=>ft(is,X[n],ss[n],[N,Bs])))}if(!f){let E;ns(C[5],(P,N)=>{let is;ns(P,(Bs,Gt)=>{let Jt;ns(Bs,([St,In],Rr)=>{In!==St&&(H(gs[n],[N,Gt,Rr],In,St,Ut),E=is=Jt=1)}),Jt&&H(ys[n],[N,Gt],Ut)}),is&&H(ts[n],[N],Ut)}),E&&H(M[n],void 0,Ut)}}},Un=n=>{const r=Ot();r!=o&&H(B[n],void 0,r);const a=Y(O[n])&&Y(Es[n]),l=Y(Fs[n])&&Y(y[n]);if(!a||!l){const f=n?[re(R),re(h)]:[R,h];if(a||ft(f[0],O[n],Es[n]),!l){let C;ns(f[1],([E,P],N)=>{P!==E&&(H(Fs[n],[N],P,E,_n),C=1)}),C&&H(y[n],void 0,_n)}}},U=(n,...r)=>(De(()=>n(...ks(r,ls))),es),Yc=()=>[Ee(),Ve()],Ee=()=>xo(V),$s=()=>no(V),qc=n=>Gr(m(V,ls(n))),zn=n=>no(m(K,ls(n))),Hn=n=>ya(m(V,ls(n))),Zs=n=>no(m(V,ls(n))),we=(n,r,a,l=0,f)=>ks(Za(ru(cC(m(V,ls(n)),(C,E)=>[I(r)?E:m(C,ls(r)),E]),([C],[E])=>SC(C,E)*(a?-1:1)),l,I(f)?f:l+f),([,C])=>C),Kc=(n,r)=>Ks(m(m(V,ls(n)),ls(r))),be=(n,r)=>no(m(m(V,ls(n)),ls(r))),zt=(n,r,a)=>m(m(m(V,ls(n)),ls(r)),ls(a)),Ve=()=>Ks(k),Ae=()=>no(k),Ht=n=>m(k,ls(n)),Wt=()=>!Y(V),Wn=n=>Js(V,ls(n)),On=(n,r)=>Js(m(K,ls(n)),ls(r)),Bn=(n,r)=>Js(m(V,ls(n)),ls(r)),jn=(n,r,a)=>Js(m(m(V,ls(n)),ls(r)),ls(a)),Ot=()=>!Y(k),Qn=n=>Js(k,ls(n)),Xc=()=>qt(V),Zc=()=>qt(k),Ic=()=>qt([V,k]),sr=()=>qt(_),tr=()=>qt(b),er=()=>qt([_,b]),nr=n=>U(()=>Qc(n)?Jc(n):0),Bt=n=>U(()=>xc(n)?gn(n):0),or=(n,r)=>U(a=>un(r,a)?Mt(a,r):0,n),cr=(n,r,a)=>U((l,f)=>_t(l,f,a)?lt(l,pt(l),f,a):0,n,r),rr=(n,r,a=!0)=>De(()=>{let l;return _t(n,l,r)&&(n=ls(n),lt(n,pt(n),l=En(n,a?1:0),r)),l}),ar=(n,r,a)=>U((l,f)=>{if(_t(l,f,a,1)){const C=pt(l);Ys(a,(E,P)=>yn(l,C,f,P,E))}},n,r),ir=(n,r,a,l)=>U((f,C,E)=>ms(fn(f,C,E,Xa(l)?l(zt(f,C,E)):l),P=>yn(f,pt(f),C,E,P)),n,r,a),jt=n=>U(()=>Sn(n)?hn(n):0),lr=n=>U(()=>Sn(n,1)?Ys(n,(r,a)=>Ft(a,r)):0),ur=(n,r)=>U(a=>ms($n(a,Xa(r)?r(Ht(a)):r),l=>Ft(a,l)),n),fr=n=>U(()=>{Ys(n[0],(r,a)=>I(r)?Yn(a):Ys(r,(l,f)=>I(l)?qn(a,f):Ys(l,(C,E)=>ni(es,a,f,E,C)))),Ys(n[1],(r,a)=>oi(es,a,r))}),xn=n=>{try{Ln(ze(n))}catch{}return es},Sr=n=>{try{Rn(ze(n))}catch{}return es},$r=n=>U(()=>{try{const[r,a]=ze(n);Ln(r),Rn(a)}catch{xn(n)}}),Gn=n=>U(()=>{if((s=Je(n))&&(Cn(n),!Y(V))){const r=Ee();Qt(),Bt(r)}}),Jn=n=>U(()=>{if(t=jc(n)){const r=Ve();Pe(),xt(),t=!0,Tn(n),jt(r)}}),dr=(n,r)=>U(()=>{Gn(n),Jn(r)}),Qt=()=>U(()=>gn({})),Yn=n=>U(r=>Js(V,r)?wn(r):0,n),qn=(n,r)=>U((a,l)=>ms(m(V,a),f=>Js(f,l)?bn(a,f,l):0),n,r),Cr=(n,r,a,l)=>U((f,C,E)=>ms(m(V,f),P=>ms(m(P,C),N=>Js(N,E)?Vn(f,P,C,N,E,l):0)),n,r,a),xt=()=>U(()=>hn({})),Tr=n=>U(r=>Js(k,r)?An(r):0,n),Kn=()=>U(()=>{Cn({}),s=!1}),Pe=()=>U(()=>{Tn({}),t=!1}),Lr=()=>U(()=>{Kn(),Pe()}),De=(n,r)=>{if(c!=-1){Xn();const a=n();return Zn(r),a}},Xn=()=>{var n;return c!=-1&&c++,c==1&&((n=i[0])==null||n.call(i),H(ws)),es},gr=()=>[Ks(L,(n,r)=>m(u,r)===-1?void 0:Ks(n,(a,l)=>m(m(S,r),l)===-1?void 0:Ks(a,([,f])=>f,f=>qo(f)),Y,Xs),Y,Xs),Ks(h,([,n])=>n,n=>qo(n)),1],yr=()=>[!Y(L),!Y(h),xo(L,$i,qo),xo(w),Ks(h,$i,qo),Ks(A),Ks(u),Gr(S),xo(T),Ks(R)],Zn=n=>{var r,a;return c>0&&(c--,c==0&&(c=1,Mn(1),Y(L)||pn(1),Fn(1),Y(h)||Un(1),n!=null&&n(es)&&(ns(L,(l,f)=>ns(l,(C,E)=>ns(C,([P],N)=>ni(es,f,E,N,P)))),Dr(L),ns(h,([l],f)=>oi(es,f,l)),Dr(h)),H(zs[0],void 0),c=-1,Mn(0),Y(L)||pn(0),Fn(0),Y(h)||Un(0),(r=i[1])==null||r.call(i),H(zs[1],void 0),(a=i[2])==null||a.call(i),c=0,e=Wt(),o=Ot(),ac([u,d,$,S,T,L,w,R,h,A],Dr))),es},es={getContent:Yc,getTables:Ee,getTableIds:$s,getTable:qc,getTableCellIds:zn,getRowCount:Hn,getRowIds:Zs,getSortedRowIds:we,getRow:Kc,getCellIds:be,getCell:zt,getValues:Ve,getValueIds:Ae,getValue:Ht,hasTables:Wt,hasTable:Wn,hasTableCell:On,hasRow:Bn,hasCell:jn,hasValues:Ot,hasValue:Qn,getTablesJson:Xc,getValuesJson:Zc,getJson:Ic,getTablesSchemaJson:sr,getValuesSchemaJson:tr,getSchemaJson:er,hasTablesSchema:()=>s,hasValuesSchema:()=>t,setContent:nr,setTables:Bt,setTable:or,setRow:cr,addRow:rr,setPartialRow:ar,setCell:ir,setValues:jt,setPartialValues:lr,setValue:ur,applyChanges:fr,setTablesJson:xn,setValuesJson:Sr,setJson:$r,setTablesSchema:Gn,setValuesSchema:Jn,setSchema:dr,delTables:Qt,delTable:Yn,delRow:qn,delCell:Cr,delValues:xt,delValue:Tr,delTablesSchema:Kn,delValuesSchema:Pe,delSchema:Lr,transaction:De,startTransaction:Xn,getTransactionChanges:gr,getTransactionLog:yr,finishTransaction:Zn,forEachTable:n=>ns(V,(r,a)=>n(a,l=>ns(r,(f,C)=>l(C,E=>oe(f,E))))),forEachTableCell:(n,r)=>oe(m(K,ls(n)),r),forEachRow:(n,r)=>ns(m(V,ls(n)),(a,l)=>r(l,f=>oe(a,f))),forEachCell:(n,r,a)=>oe(m(m(V,ls(n)),ls(r)),a),forEachValue:n=>oe(k,n),addSortedRowIdsListener:(n,r,a,l,f,C,E)=>{let P=we(n,r,a,l,f);return ps(()=>{const N=we(n,r,a,l,f);Td(N,P)||(P=N,C(es,n,r,a,l,f,P))},ds[E?1:0],[n,r],[$s])},addStartTransactionListener:n=>ps(n,ws),addWillFinishTransactionListener:n=>ps(n,zs[0]),addDidFinishTransactionListener:n=>ps(n,zs[1]),callListener:n=>(js(n),es),delListener:n=>(It(n),es),getListenerStats:()=>({hasTables:As(Ts),tables:As(M),tableIds:As(Z),hasTable:As(Ls),table:As(ts),tableCellIds:As(F),hasTableCell:As(J,ao),rowCount:As(us),rowIds:As(cs),sortedRowIds:As(ds),hasRow:As(hs,ao),row:As(ys,ao),cellIds:As(X,ao),hasCell:As(ss,Pr),cell:As(gs,Pr),invalidCell:As(Ms,Pr),hasValues:As(B),values:As(y),valueIds:As(O),hasValue:As(Es),value:As(Fs),invalidValue:As(Ns),transaction:Ra(ws)+As(zs)}),isMergeable:()=>!1,createStore:wu,addListener:ps,callListeners:H,setInternalListeners:(n,r,a,l,f)=>i=[n,r,a,l,f]};return Ys({[me+Ga]:[0,Ts,[],()=>[Wt()]],[Ga]:[0,M],[sd]:[0,Z],[me+pe]:[1,Ls,[$s],n=>[Wn(...n)]],[pe]:[1,ts,[$s]],[pe+Ja]:[1,F,[$s]],[me+pe+fo]:[2,J,[$s,zn],n=>[On(...n)]],[td]:[1,us,[$s]],[ed]:[1,cs,[$s]],[me+rc]:[2,hs,[$s,Zs],n=>[Bn(...n)]],[rc]:[2,ys,[$s,Zs]],[Ja]:[2,X,[$s,Zs]],[me+fo]:[3,ss,[$s,Zs,be],n=>[jn(...n)]],[fo]:[3,gs,[$s,Zs,be],n=>Yo(zt(...n))],InvalidCell:[3,Ms],[me+jr]:[0,B,[],()=>[Ot()]],[jr]:[0,y],[nd]:[0,O],[me+nn]:[1,Es,[Ae],n=>[Qn(...n)]],[nn]:[1,Fs,[Ae],n=>Yo(Ht(n[0]))],InvalidValue:[1,Ns]},([n,r,a,l],f)=>{es[I$+f+Z$]=(...C)=>ps(C[n],r[C[n+1]?1:0],n>0?Za(C,0,n):void 0,a,l)}),lu(es)},vC=({position:s="right",open:t=!1})=>{const e=v$(wu),o=Su.indexOf(s);return Y$(e,c=>fC(c,ic),void 0,async c=>{await c.load([{},{position:o==-1?1:o,open:!!t}]),await c.startAutoSave()}),g(bo,null,g("aside",{id:ic},g(_d,{s:e}),g(nC,{s:e})),g("style",null,md))};export{vC as I,VC as P,LC as U,RC as a,yC as b,lS as c,hC as d,gC as e};
